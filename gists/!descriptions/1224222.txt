{
  "forks": [

  ],
  "user": {
    "gravatar_id": "ecff5a3cee4fad6c1a442aa97c88e57b",
    "login": "bewest",
    "avatar_url": "https://secure.gravatar.com/avatar/ecff5a3cee4fad6c1a442aa97c88e57b?d=https://a248.e.akamai.net/assets.github.com%2Fimages%2Fgravatars%2Fgravatar-user-420.png",
    "url": "https://api.github.com/users/bewest",
    "id": 394179
  },
  "git_pull_url": "git://gist.github.com/1224222.git",
  "history": [
    {
      "user": {
        "gravatar_id": "ecff5a3cee4fad6c1a442aa97c88e57b",
        "login": "bewest",
        "avatar_url": "https://secure.gravatar.com/avatar/ecff5a3cee4fad6c1a442aa97c88e57b?d=https://a248.e.akamai.net/assets.github.com%2Fimages%2Fgravatars%2Fgravatar-user-420.png",
        "url": "https://api.github.com/users/bewest",
        "id": 394179
      },
      "version": "bcc9d31917bc998e47b8ece210ebd6eabc1b9590",
      "change_status": {
        "total": 4,
        "additions": 2,
        "deletions": 2
      },
      "url": "https://api.github.com/gists/1224222/bcc9d31917bc998e47b8ece210ebd6eabc1b9590",
      "committed_at": "2011-09-17T19:42:54Z"
    },
    {
      "user": {
        "gravatar_id": "ecff5a3cee4fad6c1a442aa97c88e57b",
        "login": "bewest",
        "avatar_url": "https://secure.gravatar.com/avatar/ecff5a3cee4fad6c1a442aa97c88e57b?d=https://a248.e.akamai.net/assets.github.com%2Fimages%2Fgravatars%2Fgravatar-user-420.png",
        "url": "https://api.github.com/users/bewest",
        "id": 394179
      },
      "version": "38564f8febff1d821edc6e3e69e71018c066277f",
      "change_status": {
        "total": 3,
        "additions": 3,
        "deletions": 0
      },
      "url": "https://api.github.com/gists/1224222/38564f8febff1d821edc6e3e69e71018c066277f",
      "committed_at": "2011-09-17T19:40:58Z"
    },
    {
      "user": {
        "gravatar_id": "ecff5a3cee4fad6c1a442aa97c88e57b",
        "login": "bewest",
        "avatar_url": "https://secure.gravatar.com/avatar/ecff5a3cee4fad6c1a442aa97c88e57b?d=https://a248.e.akamai.net/assets.github.com%2Fimages%2Fgravatars%2Fgravatar-user-420.png",
        "url": "https://api.github.com/users/bewest",
        "id": 394179
      },
      "version": "42994623278e6f7c7855bdd043e94adda01608ab",
      "change_status": {
        "total": 2,
        "additions": 1,
        "deletions": 1
      },
      "url": "https://api.github.com/gists/1224222/42994623278e6f7c7855bdd043e94adda01608ab",
      "committed_at": "2011-09-17T19:39:37Z"
    },
    {
      "user": {
        "gravatar_id": "ecff5a3cee4fad6c1a442aa97c88e57b",
        "login": "bewest",
        "avatar_url": "https://secure.gravatar.com/avatar/ecff5a3cee4fad6c1a442aa97c88e57b?d=https://a248.e.akamai.net/assets.github.com%2Fimages%2Fgravatars%2Fgravatar-user-420.png",
        "url": "https://api.github.com/users/bewest",
        "id": 394179
      },
      "version": "e9f5eaa8f9844ff91810011a74a1ceb92a6e06b0",
      "change_status": {
        "total": 3,
        "additions": 3,
        "deletions": 0
      },
      "url": "https://api.github.com/gists/1224222/e9f5eaa8f9844ff91810011a74a1ceb92a6e06b0",
      "committed_at": "2011-09-17T19:39:04Z"
    },
    {
      "user": {
        "gravatar_id": "ecff5a3cee4fad6c1a442aa97c88e57b",
        "login": "bewest",
        "avatar_url": "https://secure.gravatar.com/avatar/ecff5a3cee4fad6c1a442aa97c88e57b?d=https://a248.e.akamai.net/assets.github.com%2Fimages%2Fgravatars%2Fgravatar-user-420.png",
        "url": "https://api.github.com/users/bewest",
        "id": 394179
      },
      "version": "fc547c28298e321d97a4983f64ec3608ff78c38c",
      "change_status": {
        "total": 14,
        "additions": 12,
        "deletions": 2
      },
      "url": "https://api.github.com/gists/1224222/fc547c28298e321d97a4983f64ec3608ff78c38c",
      "committed_at": "2011-09-17T19:20:45Z"
    },
    {
      "user": {
        "gravatar_id": "ecff5a3cee4fad6c1a442aa97c88e57b",
        "login": "bewest",
        "avatar_url": "https://secure.gravatar.com/avatar/ecff5a3cee4fad6c1a442aa97c88e57b?d=https://a248.e.akamai.net/assets.github.com%2Fimages%2Fgravatars%2Fgravatar-user-420.png",
        "url": "https://api.github.com/users/bewest",
        "id": 394179
      },
      "version": "03da896f51ac06ae7c03737fd89c16ab74fa52c0",
      "change_status": {
        "total": 4,
        "additions": 2,
        "deletions": 2
      },
      "url": "https://api.github.com/gists/1224222/03da896f51ac06ae7c03737fd89c16ab74fa52c0",
      "committed_at": "2011-09-17T19:16:30Z"
    },
    {
      "user": {
        "gravatar_id": "ecff5a3cee4fad6c1a442aa97c88e57b",
        "login": "bewest",
        "avatar_url": "https://secure.gravatar.com/avatar/ecff5a3cee4fad6c1a442aa97c88e57b?d=https://a248.e.akamai.net/assets.github.com%2Fimages%2Fgravatars%2Fgravatar-user-420.png",
        "url": "https://api.github.com/users/bewest",
        "id": 394179
      },
      "version": "f125be01f1663a3470e0585dafe4daf121a5c584",
      "change_status": {
        "total": 0,
        "additions": 0,
        "deletions": 0
      },
      "url": "https://api.github.com/gists/1224222/f125be01f1663a3470e0585dafe4daf121a5c584",
      "committed_at": "2011-09-17T18:50:45Z"
    },
    {
      "user": {
        "gravatar_id": "ecff5a3cee4fad6c1a442aa97c88e57b",
        "login": "bewest",
        "avatar_url": "https://secure.gravatar.com/avatar/ecff5a3cee4fad6c1a442aa97c88e57b?d=https://a248.e.akamai.net/assets.github.com%2Fimages%2Fgravatars%2Fgravatar-user-420.png",
        "url": "https://api.github.com/users/bewest",
        "id": 394179
      },
      "version": "51777c282e994b7584908a5423fe8e79087886c3",
      "change_status": {
        "total": 1,
        "additions": 1,
        "deletions": 0
      },
      "url": "https://api.github.com/gists/1224222/51777c282e994b7584908a5423fe8e79087886c3",
      "committed_at": "2011-09-17T18:49:59Z"
    },
    {
      "user": {
        "gravatar_id": "ecff5a3cee4fad6c1a442aa97c88e57b",
        "login": "bewest",
        "avatar_url": "https://secure.gravatar.com/avatar/ecff5a3cee4fad6c1a442aa97c88e57b?d=https://a248.e.akamai.net/assets.github.com%2Fimages%2Fgravatars%2Fgravatar-user-420.png",
        "url": "https://api.github.com/users/bewest",
        "id": 394179
      },
      "version": "06de0782cffa7e5ec2d79f28cd7bf7f74e8471b4",
      "change_status": {
        "total": 5,
        "additions": 4,
        "deletions": 1
      },
      "url": "https://api.github.com/gists/1224222/06de0782cffa7e5ec2d79f28cd7bf7f74e8471b4",
      "committed_at": "2011-09-17T18:48:44Z"
    },
    {
      "user": {
        "gravatar_id": "ecff5a3cee4fad6c1a442aa97c88e57b",
        "login": "bewest",
        "avatar_url": "https://secure.gravatar.com/avatar/ecff5a3cee4fad6c1a442aa97c88e57b?d=https://a248.e.akamai.net/assets.github.com%2Fimages%2Fgravatars%2Fgravatar-user-420.png",
        "url": "https://api.github.com/users/bewest",
        "id": 394179
      },
      "version": "51db0dadbee2212d5e8cbecd350470da0c671f68",
      "change_status": {
        "total": 226,
        "additions": 226,
        "deletions": 0
      },
      "url": "https://api.github.com/gists/1224222/51db0dadbee2212d5e8cbecd350470da0c671f68",
      "committed_at": "2011-09-17T18:47:57Z"
    }
  ],
  "description": "d3 sunrise sunset",
  "html_url": "https://gist.github.com/1224222",
  "git_push_url": "git@gist.github.com:1224222.git",
  "comments": 0,
  "created_at": "2011-09-17T18:49:59Z",
  "public": true,
  "files": {
    "azel.html": {
      "raw_url": "https://gist.github.com/raw/1224222/f8ad01a488a438f4e34a5b2138e69199b4a62c38/azel.html",
      "type": "text/html",
      "filename": "azel.html",
      "size": 50459,
      "content": "<HTML>\n<HEAD>\n<TITLE>NOAA Solar Position Calculator</TITLE>\n<SCRIPT LANGUAGE=\"JavaScript\">\n\n//***********************************************************************/\n//*\tDATA STRUCTURES\t\t\t\t\t\t\t\t\t*/\n//***********************************************************************/\n\n\tfunction month(name, numdays, abbr) \n\t{\n\t\tthis.name = name;\n\t\tthis.numdays = numdays;\n\t\tthis.abbr = abbr;\n\t}\n\n//*********************************************************************/\n\n\tfunction ans(daySave,value)\n\t{\n\t\tthis.daySave = daySave;\n\t\tthis.value = value;\n\t}\n\n//*********************************************************************/\n\n\tfunction city(name, lat, lng, zoneHr) \n\t{\n\t\tthis.name = name;\n\t\tthis.lat = lat;\n\t\tthis.lng = lng;\n\t\tthis.zoneHr = zoneHr;\n\t}\n\n\n//***********************************************************************/\n//*\tData for Selectbox Controls\t\t\t\t\t\t\t*/\n//***********************************************************************/\n\n\tvar monthList = new Array();\t//\tlist of months and days for non-leap year\n\tvar i = 0;\n\tmonthList[i++] = new month(\"January\", 31, \"Jan\");\n\tmonthList[i++] = new month(\"February\", 28, \"Feb\");\n\tmonthList[i++] = new month(\"March\", 31, \"Mar\");\n\tmonthList[i++] = new month(\"April\", 30, \"Apr\");\n\tmonthList[i++] = new month(\"May\", 31, \"May\");\n\tmonthList[i++] = new month(\"June\", 30, \"Jun\");\n\tmonthList[i++] = new month(\"July\", 31, \"Jul\");\n\tmonthList[i++] = new month(\"August\", 31, \"Aug\");\n\tmonthList[i++] = new month(\"September\", 30, \"Sep\");\n\tmonthList[i++] = new month(\"October\", 31, \"Oct\");\n\tmonthList[i++] = new month(\"November\", 30, \"Nov\");\n\tmonthList[i++] = new month(\"December\", 31, \"Dec\");\n\n//*********************************************************************/\n\n\tvar YesNo = new Array();\t//Daylight Saving array\t\n\ti=0;\n\tYesNo[i++] = new ans(\"No\",0);\n\tYesNo[i++] = new ans(\"Yes\",60);\n\n//*********************************************************************/\n\n\tvar City = new Array();\n\n\tj = 0;\n\tCity[j++] = new city(\"Enter Lat/Long -->\",0,0,0);\n\tCity[j++] = new city(\"\",0,0,0);\n\tCity[j++] = new city(\"US CITIES\",0,0,0);\n\tCity[j++] = new city(\"Albuquerque, NM\", 35.0833,106.65,7);\n\tCity[j++] = new city(\"Anchorage, AK\", 61.217, 149.90,9);\n\tCity[j++] = new city(\"Atlanta, GA\", 33.733, 84.383, 5);\n\tCity[j++] = new city(\"Austin, TX\", 30.283, 97.733, 6);\n\tCity[j++] = new city(\"Birmingham, AL\", 33.521, 86.8025, 6);\n\tCity[j++] = new city(\"Bismarck, ND\", 46.817, 100.783, 6);\n\tCity[j++] = new city(\"Boston, MA\", 42.35, 71.05, 5);\n\tCity[j++] = new city(\"Boulder, CO\", 40.125, 105.237, 7);\n\tCity[j++] = new city(\"Chicago, IL\", 41.85,87.65,6);\n\tCity[j++] = new city(\"Dallas, TX\", 32.46, 96.47,6);\n\tCity[j++] = new city(\"Denver, CO\", 39.733, 104.983, 7);\n\tCity[j++] = new city(\"Detroit, MI\", 42.333, 83.05, 5);\n\tCity[j++] = new city(\"Honolulu, HI\", 21.30, 157.85, 10);\n\tCity[j++] = new city(\"Houston, TX\", 29.75, 95.35, 6);\n\tCity[j++] = new city(\"Indianapolis, IN\", 39.767, 86.15, 5);\n\tCity[j++] = new city(\"Jackson, MS\", 32.283, 90.183, 6);\n\tCity[j++] = new city(\"Kansas City, MO\", 39.083, 94.567,6);\n\tCity[j++] = new city(\"Los Angeles, CA\",34.05,118.233,8);\n\tCity[j++] = new city(\"Menomonee Falls, WI\",43.11,88.10,6);\n\tCity[j++] = new city(\"Miami, FL\", 25.767, 80.183,5);\n\tCity[j++] = new city(\"Minneapolis, MN\", 44.967, 93.25, 6);\n\tCity[j++] = new city(\"New Orleans, LA\", 29.95, 90.067, 6);\n\tCity[j++] = new city(\"New York City, NY\", 40.7167, 74.0167, 5);\n\tCity[j++] = new city(\"Oklahoma City, OK\", 35.483, 97.533,6);\n\tCity[j++] = new city(\"Philadelphia, PA\", 39.95, 75.15, 5);\n\tCity[j++] = new city(\"Phoenix, AZ\",33.433,112.067,7);\n\tCity[j++] = new city(\"Pittsburgh, PA\",40.433,79.9833,5);\n\tCity[j++] = new city(\"Portland, ME\", 43.666, 70.283, 5);\n\tCity[j++] = new city(\"Portland, OR\", 45.517, 122.65, 8);\n\tCity[j++] = new city(\"Raleigh, NC\", 35.783, 78.65, 5);\n\tCity[j++] = new city(\"Richmond, VA\", 37.5667, 77.450, 5);\n\tCity[j++] = new city(\"Saint Louis, MO\", 38.6167,90.1833,6);\n\tCity[j++] = new city(\"San Antonio, TX\", 29.53, 98.47, 6);\n\tCity[j++] = new city(\"San Diego, CA\", 32.7667, 117.2167, 8);\n\tCity[j++] = new city(\"San Francisco, CA\",37.7667,122.4167,8);\n\tCity[j++] = new city(\"Seattle, WA\",47.60,122.3167,8);\n\tCity[j++] = new city(\"Washington DC\", 38.8833, 77.0333,5);\n\tCity[j++] = new city(\"\",0,0,0);\n\tCity[j++] = new city(\"WORLD CITIES\",0,0,0);\n\tCity[j++] = new city(\"Beijing, China\",39.9167, -116.4167,-8);\n\tCity[j++] = new city(\"Berlin, Germany\",52.33, -13.30, -1);\n\tCity[j++] = new city(\"Bombay, India\", 18.9333, -72.8333, -5.5);\n\tCity[j++] = new city(\"Buenos Aires, Argentina\", -34.60,58.45,3);\n\tCity[j++] = new city(\"Cairo, Egypt\", 30.10,-31.3667,-2);\n\tCity[j++] = new city(\"Cape Town, South Africa\",-33.9167,-18.3667,-2);\n\tCity[j++] = new city(\"Caracas, Venezuela\", 10.50,66.9333,4);\n\tCity[j++] = new city(\"Helsinki, Finland\", 60.1667, -24.9667,-2);\n\tCity[j++] = new city(\"Hong Kong, China\", 22.25,-114.1667, -8);\n\tCity[j++] = new city(\"Jerusalem, Israel\", 31.7833, -35.2333, -2);\n\tCity[j++] = new city(\"London, England\", 51.50, 0.1667,0);\n\tCity[j++] = new city(\"Mexico City, Mexico\", 19.4,99.15,6);\n\tCity[j++] = new city(\"Moscow, Russia\", 55.75, -37.5833, -3);\n\tCity[j++] = new city(\"New Delhi, India\",28.6, -77.2, -5.5);\n\tCity[j++] = new city(\"Ottawa, Canada\", 45.41667,75.7,5);\n\tCity[j++] = new city(\"Paris, France\", 48.8667, -2.667, -1);\n\tCity[j++] = new city(\"Rio de Janeiro, Brazil\",-22.90,43.2333,3);\n\tCity[j++] = new city(\"Riyadh, Saudi Arabia\", 24.633, -46.71667, -3);\n\tCity[j++] = new city(\"Rome, Italy\",41.90, -12.4833,-1);\n\tCity[j++] = new city(\"Sydney, Australia\",-33.8667,-151.2167,-10);\n\tCity[j++] = new city(\"Tokyo, Japan\", 35.70, -139.7667, -9); \n\tCity[j++] = new city(\"Zurich, Switzerland\", 47.3833, -8.5333,-1);\n\tCity[j++] = new city(\"\",0,0,0);\n\tCity[j++] = new city(\"SURFRAD NETWORK\",0,0,0);\n\tCity[j++] = new city(\"Goodwin Creek, MS\",34.2544444,89.8738888, 6);\n\tCity[j++] = new city(\"Fort Peck, MT\",48.310555,105.1025, 7);\n\tCity[j++] = new city(\"Bondville, IL\",40.055277,88.371944, 6);\n\tCity[j++] = new city(\"Table Mountain, CO\",40.125,105.23694, 7);\n\tCity[j++] = new city(\"Desert Rock, NV\",36.626,116.018,8);\n\tCity[j++] = new city(\"Penn State, PA\",40.72,77.93,5);\n\tCity[j++] = new city(\"Canaan Valley, WV\", 39.1, 79.4, 5);\n\tCity[j++] = new city(\"Sioux Falls, SD\", 43.733, 96.6233, 6);\n\tCity[j++] = new city(\"\",0,0,0);\n\tCity[j++] = new city(\"ARM/CART NETWORK\",0,0,0);\n\tCity[j++] = new city(\"Atqasuk, AK\", 70.47215, 157.4078, 9);\n\tCity[j++] = new city(\"Barrow, AK\", 71.30,156.683, 9);\n\tCity[j++] = new city(\"Manus Island, PNG\", -2.06, -147.425,-10);\n\tCity[j++] = new city(\"Nauru Island\", -0.52, -166.92, -12);\n\tCity[j++] = new city(\"Darwin, Australia\", -12.425, -130.891, -9.5);\n\tCity[j++] = new city(\"SGP Central Facility\", 36.6167, 97.5, 6);\n\tCity[j++] = new city(\"\",0,0,0);\n\tCity[j++] = new city(\"ISIS NETWORK\",0,0,0);\n\tCity[j++] = new city(\"Albuquerque, NM\", 35.04, 106.62,7);\n\tCity[j++] = new city(\"Bismarck, ND\", 46.77, 100.77,6);\n\tCity[j++] = new city(\"Hanford, CA\", 36.31, 119.63,8);\n\tCity[j++] = new city(\"Madison, WI\", 43.13, 89.33,6);\t\n\tCity[j++] = new city(\"Oak Ridge, TN\", 35.96, 84.37,5);\n\tCity[j++] = new city(\"Salt Lake City, UT\", 40.77,111.97,7);\n\tCity[j++] = new city(\"Seattle, WA\", 47.68, 122.25,8);\n\tCity[j++] = new city(\"Sterling, VA\", 38.98, 77.47,5);\n\tCity[j++] = new city(\"Tallahassee, FL\", 30.38, 84.37,5);\n\n//*********************************************************************/\n\n</SCRIPT>\n</HEAD>\n\n<BODY BACKGROUND=\"sky3.jpg\" bgcolor=\"#99CCFF\">\n<CENTER>\n<TABLE BORDER=0 CELLPADDING=5>\n<TR><TD>\n<A HREF=\"http://www.doc.gov\"><IMG SRC=\"doclogo.gif\" ALT=\"Dept of Commerce Seal\" BORDER=0></A>\n</TD>\n<TD>\n<CENTER>\n<FONT SIZE=\"4\"><B><A HREF=\"/index.html\" target=\"_top\">NOAA ESRL</A></B></FONT><BR>\n<FONT SIZE=\"6\"><B>Solar Position Calculator</B></FONT>\n</CENTER>\n</TD>\n<TD>\n<CENTER>\n<A HREF=\"http://www.noaa.gov\"><IMG SRC=\"noaaemblemt.gif\" ALT=\"National Oceanic and Atmospheric Administration\" BORDER=0></A><BR>\n<A HREF=\"http://www.esrl.noaa.gov\"><FONT SIZE=\"2\">Earth System<br>Research Lab</FONT></A>\n</CENTER>\n</TD>\n</TR>\n</TABLE>\n<HR>\n<FONT SIZE=\"6\">\n*** <A HREF=\"http://www.esrl.noaa.gov/gmd/grad/solcalc/\">Click here to try NOAA's New Solar Calculator</A> ***\n</FONT>\n</CENTER>\n<HR>\n\n<SCRIPT LANGUAGE=\"JavaScript\">\n\n\tfunction setLatLong(f, index)\n\t{\n//Decimal degrees are passed in the array.  Temporarily store these decimal\n// degs in lat and lon deg and have convLatLong modify them.\n\t\tf[\"latDeg\"].value = City[index].lat;\n\t\tf[\"lonDeg\"].value = City[index].lng;\n\t\n//These are needed to prevent iterative adding of min and sec when set\n//button is clicked.\n\t\tf[\"latMin\"].value = 0;\n\t\tf[\"latSec\"].value = 0;\n\t\tf[\"lonMin\"].value = 0;\n\t\tf[\"lonSec\"].value = 0;\n\t\t\n//call convLatLong to convert decimal degrees into table form.\n\t\tconvLatLong(f);\n\n//Local time zone value set in table\n\t\tf[\"hrsToGMT\"].value =  City[index].zoneHr;\n\t}\n\n//\t'isLeapYear' returns '1' if the yr is a leap year, '0' if it is not.\n\n\tfunction isLeapYear(yr) \n\t{\n\t\treturn ((yr % 4 == 0 && yr % 100 != 0) || yr % 400 == 0);\n\t}\n\n//*********************************************************************/\n\n// isPosInteger returns false if the value is not a positive integer, true is\n// returned otherwise.  The code is from taken from Danny Goodman's Javascript\n// Handbook, p. 372.\n\n\tfunction isPosInteger(inputVal) \n\t{\n\t\tinputStr = \"\" + inputVal;\n\t\tfor (var i = 0; i < inputStr.length; i++) {\n\t\t\tvar oneChar = inputStr.charAt(i);\n\t\t\tif (oneChar < \"0\" || oneChar > \"9\")\n\t\t\t\treturn false;\n\t\t}\n\t\treturn true;\n\t}\n\n//*********************************************************************/\n\n\tfunction isInteger(inputVal) \n\t{\n\t\tinputStr = \"\" + inputVal;\n\t\tif(inputStr == \"NaN\") return false;\n\t\tif(inputStr == \"-NaN\") return false;\n\t\tfor (var i = 0; i < inputStr.length; i++) \n\t\t{\n\t\t\tvar oneChar = inputStr.charAt(i);\n\t\t\tif (i == 0 && (oneChar == \"-\" || oneChar == \"+\"))\n\t\t\t{\n\t\t\t\tcontinue;\n\t\t\t}\n\t\t\tif (oneChar < \"0\" || oneChar > \"9\")\n\t\t\t{\n\t\t\t\treturn false;\n\t\t\t}\n\t\t}\n\t\treturn true;\n\t}\n\n\n//*********************************************************************/\n\n\tfunction isNumber(inputVal) \n\t{\n\t\tvar oneDecimal = false;\n\t\tvar inputStr = \"\" + inputVal;\n\t\tfor (var i = 0; i < inputStr.length; i++) \n\t\t{\n\t\t\tvar oneChar = inputStr.charAt(i);\n\t\t\tif (i == 0 && (oneChar == \"-\" || oneChar == \"+\"))\n\t\t\t{\n\t\t\t\tcontinue;\n\t\t\t}\n\t\t\tif (oneChar == \".\" && !oneDecimal) \n\t\t\t{\n\t\t\t\toneDecimal = true;\n\t\t\t\tcontinue;\n\t\t\t}\n\t\t\tif (oneChar < \"0\" || oneChar > \"9\")\n\t\t\t{\n\t\t\t\treturn false;\n\t\t\t}\n\t\t}\n\t\treturn true;\n\t}\n\n//\t'isValidInput' makes sure valid input is entered before calculating\n//\tthe sunrise and sunset.  False is returned if an invalid entry was made,\n//\ttrue if the entry is valid.\n\n\tfunction isValidInput(f, index, latLongForm) \n\t{\t\n\t\tif (f[\"day\"].value == \"\") {\t//\tsee if the day field is empty\n\t\t\talert(\"You must enter a day before attempting the calculation.\");\n\t\t\treturn false;\n\t\t}\n\t\telse if (f[\"year\"].value == \"\") {\t// see if year field is empty\n\t\t\talert(\"You must enter a year before attempting the calculation.\");\n\t\t\treturn false;\n\t\t}\n\t\telse if (!isPosInteger(f[\"day\"].value) || f[\"day\"].value == 0)\n\t\t{\n\t\t\talert(\"The day must be a positive integer.\");\n\t\t\treturn false;\n\t\t}\n\t\telse if (!isPosInteger(f[\"year\"].value)) {\n\t\t\talert(\"The year must be a positive integer.\");\n\t\t\treturn false;\n\t\t}\n\t\telse if (f[\"hour\"].value == \"\") {\t// see if hour field is empty\n\t\t\talert(\"You must enter a time before attempting the calculation.\");\n\t\t\treturn false;\n\t\t}\n\t\telse if (!isPosInteger(f[\"hour\"].value) || \n\t\t\t\t!isPosInteger(f[\"mins\"].value) ||\n\t\t\t\t!isPosInteger(f[\"secs\"].value))\n\t\t{\n\t\t\talert(\"The time fields must contain positive integers.\");\n\t\t\treturn false;\n\t\t}\n\n//\t\telse if ( ((f[\"ampm\"].value == \"AM\") || (f[\"ampm\"].value == \"PM\")) && (f[\"hour\"].value > 12) )\n//\t\t{\n//\t\t\talert(\"AM/PM hour must be between 0 and 12.\");\n//\t\t\treturn false;\n//\t\t}\n//\t\telse if ( (f[\"ampm\"].value == \"24\") && (f[\"hour\"].value > 23) )\n//\t\t{\n//\t\t\talert(\"Hour must be between 0 and 23.\");\n//\t\t\treturn false;\n//\t\t}\n\t\telse if ( (f[\"hour\"].value > 23) )\n\t\t{\n\t\t\talert(\"Hour must be between 0 and 23.\");\n\t\t\treturn false;\n\t\t}\n\t\telse if (f[\"mins\"].value > 59)\n\t\t{\n\t\t\talert(\"Minutes must be between 0 and 59.\");\n\t\t\treturn false;\n\t\t}\n\t\telse if (f[\"secs\"].value > 59)\n\t\t{\n\t\t\talert(\"Seconds must be between 0 and 59.\");\n\t\t\treturn false;\n\t\t}\n\n//\tFor the non-February months see if the day entered is greater than\n//\tthe number of days in the selected month\n\n\t\telse if ((index != 1) && (f[\"day\"].value > monthList[index].numdays))\n\t\t{\n\t\t\talert(\"There are only \" + monthList[index].numdays + \n\t\t\t\" days in \" + monthList[index].name + \".\");\n\t\t\treturn false;\n\t\t}\n\n//\tFirst see if the year entered is a leap year.  If so we have to make sure\n//\tthe days entered is <= 29.  If not a leap year we make sure that the days\n//\tentered is <= 28.\n\n\t\telse if (index == 1) {\t//\t month selected is February \n\t\t\tif (isLeapYear(f[\"year\"].value)) {\t//\tyear is a leap year\n\t\t\t\tif (f[\"day\"].value > (monthList[index].numdays + 1)) {\n\t\t\t\t\talert(\"There are only \" + \n\t\t\t\t\t(monthList[index].numdays + 1) + \n\t\t\t\t\t\" days in \" + monthList[index].name + \".\");\n\t\t\t\t\treturn false;\n\t\t\t\t}\n\t\t\t\telse\n\t\t\t\t\treturn true;\n\t\t\t}\n\t\t\telse {\t//\tyear entered is not a leap year\n\t\t\t\tif (f[\"day\"].value > monthList[index].numdays) {\n\t\t\t\t\talert(\"There are only \" + \n\t\t\t\t\tmonthList[index].numdays + \n\t\t\t\t\t\" days in \" + monthList[index].name + \".\");\n\t\t\t\t\treturn false;\n\t\t\t\t}\n\t\t\t\telse\n\t\t\t\t\treturn true;\n\t\t\t}\n\t\t}\n\t\telse \n\t\t\treturn true;\t\n\t}\n\n//convLatLong converts any type of lat/long input\n//into  the table form and then handles bad input\n//it is nested in the calcSun function.\n\nfunction convLatLong(f){\n\n\t\tif(f[\"latDeg\"].value == \"\")\n\t\t{\n\t\t\tf[\"latDeg\"].value = 0;\n\t\t}\n\t\tif(f[\"latMin\"].value == \"\")\n\t\t{\n\t\t\tf[\"latMin\"].value = 0;\n\t\t}\n\t\tif(f[\"latSec\"].value == \"\")\n\t\t{\n\t\t\tf[\"latSec\"].value = 0;\n\t\t}\n\t\tif(f[\"lonDeg\"].value == \"\")\n\t\t{\n\t\t\tf[\"lonDeg\"].value = 0;\n\t\t}\n\t\tif(f[\"lonMin\"].value == \"\")\n\t\t{\n\t\t\tf[\"lonMin\"].value = 0;\n\t\t}\n\t\tif(f[\"lonSec\"].value == \"\")\n\t\t{\n\t\t\tf[\"lonSec\"].value = 0;\n\t\t}\n\n\t\tvar neg = 0;\n\t\tif(f[\"latDeg\"].value.charAt(0) == '-') {\n\t\t\tneg = 1;\n\t\t}\n\n\t\tif(neg != 1)\n\t\t{\n\t\t\tvar latSeconds = (parseFloat(f[\"latDeg\"].value))*3600 + parseFloat(f[\"latMin\"].value)*60 + parseFloat(f[\"latSec\"].value)*1;\n\n\t\t\tf[\"latDeg\"].value = Math.floor(latSeconds/3600);\n\t\t\tf[\"latMin\"].value = Math.floor((latSeconds-(parseFloat(f[\"latDeg\"].value)*3600))/60);\n\t\t\tf[\"latSec\"].value = Math.floor((latSeconds-(parseFloat(f[\"latDeg\"].value)*3600)- (parseFloat(f[\"latMin\"].value)*60)) + 0.5);\n\n\t\t}\n\t\telse if(parseFloat(f[\"latDeg\"].value) > -1)\n\t\t{\n\t\t\tvar latSeconds = parseFloat(f[\"latDeg\"].value)*3600 - parseFloat(f[\"latMin\"].value)*60 - parseFloat(f[\"latSec\"].value)*1;\n\n\t\t\tf[\"latDeg\"].value = \"-0\";\n\t\t\tf[\"latMin\"].value = Math.floor((-latSeconds)/60);\n\t\t\tf[\"latSec\"].value = Math.floor( (-latSeconds-(parseFloat(f[\"latMin\"].value)*60)) + 0.5);\n\n\t\t}\n\t\telse\n\t\t{\n\t\t\tvar latSeconds = parseFloat(f[\"latDeg\"].value)*3600 - parseFloat(f[\"latMin\"].value)*60 - parseFloat(f[\"latSec\"].value)*1;\n\n\t\t\tf[\"latDeg\"].value = Math.ceil(latSeconds/3600);\n\t\t\tf[\"latMin\"].value = Math.floor((-latSeconds+(parseFloat(f[\"latDeg\"].value)*3600))/60);\n\t\t\tf[\"latSec\"].value = Math.floor((-latSeconds+(parseFloat(f[\"latDeg\"].value)*3600) - (parseFloat(f[\"latMin\"].value)*60)) + 0.5);\n\t\t}\n\t\n\n\t\tneg = 0;\n\t\tif(f[\"lonDeg\"].value.charAt(0) == '-') {\n\t\t\tneg = 1;\n\t\t}\n\n\t\tif(neg != 1)\n\t\t{\n        \t\tvar lonSeconds = parseFloat(f[\"lonDeg\"].value)*3600 + parseFloat(f[\"lonMin\"].value)*60 + parseFloat(f[\"lonSec\"].value)*1;\n\t\t\tf[\"lonDeg\"].value = Math.floor(lonSeconds/3600);\n\t\t\tf[\"lonMin\"].value = Math.floor((lonSeconds-(parseFloat(f[\"lonDeg\"].value)*3600))/60);\n\t\t\tf[\"lonSec\"].value = Math.floor((lonSeconds-(parseFloat(f[\"lonDeg\"].value)*3600)- (parseFloat(f[\"lonMin\"].value))*60) + 0.5);\n\t\t}\n\t\telse if(parseFloat(f[\"lonDeg\"].value) > -1)\n\t\t{\n\t\t\tvar lonSeconds = parseFloat(f[\"lonDeg\"].value)*3600 - parseFloat(f[\"lonMin\"].value)*60 - parseFloat(f[\"lonSec\"].value)*1;\n\n\t\t\tf[\"lonDeg\"].value = \"-0\";\n\t\t\tf[\"lonMin\"].value = Math.floor((-lonSeconds)/60);\n\t\t\tf[\"lonSec\"].value = Math.floor( (-lonSeconds-(parseFloat(f[\"lonMin\"].value)*60)) + 0.5);\n\n\t\t}\n\t\telse\n\t\t{\n\t\t\tvar lonSeconds = parseFloat(f[\"lonDeg\"].value)*3600 - parseFloat(f[\"lonMin\"].value)*60 - parseFloat(f[\"lonSec\"].value)*1;\n\t\tf[\"lonDeg\"].value = Math.ceil(lonSeconds/3600);\n\t\tf[\"lonMin\"].value = Math.floor((-lonSeconds+(parseFloat(f[\"lonDeg\"].value)*3600))/60);\n\t\tf[\"lonSec\"].value = Math.floor((-lonSeconds+(parseFloat(f[\"lonDeg\"].value)*3600)-(parseFloat(f[\"lonMin\"].value)*60)) + 0.5);\n\t}\t\n\t//Test for invalid lat/long input\n\n\t\tif(latSeconds > 323280){\n\t\t\talert(\"You have entered an invalid latitude.\\nSetting lat=89.8.\");\n\t\t\tf[\"latDeg\"].value = 89.8;\n\t\t\tf[\"latMin\"].value = 0;\n\t\t\tf[\"latSec\"].value = 0;\n\t\t\t}\n\t\tif(latSeconds < -323280){\n\t\t\talert(\"You have entered an invalid latitude.\\n  Setting lat= -89.8.\");\n\t\t\tf[\"latDeg\"].value = -89.8;\n\t\t\tf[\"latMin\"].value = 0;\n\t\t\tf[\"latSec\"].value = 0;\n\t\t\t}\n\t\tif(lonSeconds > 648000){\n\t\t\talert(\"You have entered an invalid longitude.\\n Setting lon= 180.\");\n\t\t\tf[\"lonDeg\"].value = 180;\n\t\t\tf[\"lonMin\"].value = 0;\n\t\t\tf[\"lonSec\"].value = 0;\n\t\t\t}\n\t\tif(lonSeconds < -648000){\n\t\t\talert(\"You have entered an invalid latitude.\\n Setting lon= -180.\");\n\t\t\tf[\"lonDeg\"].value = -180;\n\t\t\tf[\"lonMin\"].value = 0;\n\t\t\tf[\"lonSec\"].value =0;\n\t\t\t}\n}\n\n\n\n//***********************************************************************/\n//***********************************************************************/\n//*\t\t\t\t\t\t\t\t\t\t\t\t*/\n//*This section contains subroutines used in calculating solar position */\n//*\t\t\t\t\t\t\t\t\t\t\t\t*/\n//***********************************************************************/\n//***********************************************************************/\n\n// Convert radian angle to degrees\n\n\tfunction radToDeg(angleRad) \n\t{\n\t\treturn (180.0 * angleRad / Math.PI);\n\t}\n\n//*********************************************************************/\n\n// Convert degree angle to radians\n\n\tfunction degToRad(angleDeg) \n\t{\n\t\treturn (Math.PI * angleDeg / 180.0);\n\t}\n\n//*********************************************************************/\n\n\n//***********************************************************************/\n//* Name:    calcDayOfYear\t\t\t\t\t\t\t\t*/\n//* Type:    Function\t\t\t\t\t\t\t\t\t*/\n//* Purpose: Finds numerical day-of-year from mn, day and lp year info  */\n//* Arguments:\t\t\t\t\t\t\t\t\t\t*/\n//*   month: January = 1\t\t\t\t\t\t\t\t*/\n//*   day  : 1 - 31\t\t\t\t\t\t\t\t\t*/\n//*   lpyr : 1 if leap year, 0 if not\t\t\t\t\t\t*/\n//* Return value:\t\t\t\t\t\t\t\t\t\t*/\n//*   The numerical day of year\t\t\t\t\t\t\t*/\n//***********************************************************************/\n\n\tfunction calcDayOfYear(mn, dy, lpyr) \n\t{\n\t\tvar k = (lpyr ? 1 : 2);\n\t\tvar doy = Math.floor((275 * mn)/9) - k * Math.floor((mn + 9)/12) + dy -30;\n\t\treturn doy;\n\t}\n\n\n//***********************************************************************/\n//* Name:    calcDayOfWeek\t\t\t\t\t\t\t\t*/\n//* Type:    Function\t\t\t\t\t\t\t\t\t*/\n//* Purpose: Derives weekday from Julian Day\t\t\t\t\t*/\n//* Arguments:\t\t\t\t\t\t\t\t\t\t*/\n//*   juld : Julian Day\t\t\t\t\t\t\t\t\t*/\n//* Return value:\t\t\t\t\t\t\t\t\t\t*/\n//*   String containing name of weekday\t\t\t\t\t\t*/\n//***********************************************************************/\n\n\tfunction calcDayOfWeek(juld)\n\t{\n\t\tvar A = (juld + 1.5) % 7;\n\t\tvar DOW = (A==0)?\"Sunday\":(A==1)?\"Monday\":(A==2)?\"Tuesday\":(A==3)?\"Wednesday\":(A==4)?\"Thursday\":(A==5)?\"Friday\":\"Saturday\";\n\t\treturn DOW;\n\t}\n\n\n//***********************************************************************/\n//* Name:    calcJD\t\t\t\t\t\t\t\t\t*/\n//* Type:    Function\t\t\t\t\t\t\t\t\t*/\n//* Purpose: Julian day from calendar day\t\t\t\t\t\t*/\n//* Arguments:\t\t\t\t\t\t\t\t\t\t*/\n//*   year : 4 digit year\t\t\t\t\t\t\t\t*/\n//*   month: January = 1\t\t\t\t\t\t\t\t*/\n//*   day  : 1 - 31\t\t\t\t\t\t\t\t\t*/\n//* Return value:\t\t\t\t\t\t\t\t\t\t*/\n//*   The Julian day corresponding to the date\t\t\t\t\t*/\n//* Note:\t\t\t\t\t\t\t\t\t\t\t*/\n//*   Number is returned for start of day.  Fractional days should be\t*/\n//*   added later.\t\t\t\t\t\t\t\t\t*/\n//***********************************************************************/\n\n\tfunction calcJD(year, month, day)\n\t{\n\t\tif (month <= 2) {\n\t\t\tyear -= 1;\n\t\t\tmonth += 12;\n\t\t}\n\t\tvar A = Math.floor(year/100);\n\t\tvar B = 2 - A + Math.floor(A/4);\n\n\t\tvar JD = Math.floor(365.25*(year + 4716)) + Math.floor(30.6001*(month+1)) + day + B - 1524.5;\n\t\treturn JD;\n\t}\n\n\n\n//***********************************************************************/\n//* Name:    calcDateFromJD\t\t\t\t\t\t\t\t*/\n//* Type:    Function\t\t\t\t\t\t\t\t\t*/\n//* Purpose: Calendar date from Julian Day\t\t\t\t\t*/\n//* Arguments:\t\t\t\t\t\t\t\t\t\t*/\n//*   jd   : Julian Day\t\t\t\t\t\t\t\t\t*/\n//* Return value:\t\t\t\t\t\t\t\t\t\t*/\n//*   String date in the form DD-MONTHNAME-YYYY\t\t\t\t\t*/\n//* Note:\t\t\t\t\t\t\t\t\t\t\t*/\n//***********************************************************************/\n\n\tfunction calcDateFromJD(jd)\n\t{\n\t\tvar z = Math.floor(jd + 0.5);\n\t\tvar f = (jd + 0.5) - z;\n\n\t\tif (z < 2299161) {\n\t\t\tvar A = z;\n\t\t} else {\n\t\t\talpha = Math.floor((z - 1867216.25)/36524.25);\n\t\t\tvar A = z + 1 + alpha - Math.floor(alpha/4);\n\t\t}\n\n\t\tvar B = A + 1524;\n\t\tvar C = Math.floor((B - 122.1)/365.25);\n\t\tvar D = Math.floor(365.25 * C);\n\t\tvar E = Math.floor((B - D)/30.6001);\n\n\t\tvar day = B - D - Math.floor(30.6001 * E) + f;\n\t\tvar month = (E < 14) ? E - 1 : E - 13;\n\t\tvar year = (month > 2) ? C - 4716 : C - 4715;\n\n\t\t// alert (\"date: \" + day + \"-\" + monthList[month-1].name + \"-\" + year);\n\t\treturn (day + \"-\" + monthList[month-1].name + \"-\" + year);\n\t}\n\n\n//***********************************************************************/\n//* Name:    calcDayFromJD\t\t\t\t\t\t\t\t*/\n//* Type:    Function\t\t\t\t\t\t\t\t\t*/\n//* Purpose: Calendar day (minus year) from Julian Day\t\t\t*/\n//* Arguments:\t\t\t\t\t\t\t\t\t\t*/\n//*   jd   : Julian Day\t\t\t\t\t\t\t\t\t*/\n//* Return value:\t\t\t\t\t\t\t\t\t\t*/\n//*   String date in the form DD-MONTH\t\t\t\t\t\t*/\n//***********************************************************************/\n\n\tfunction calcDayFromJD(jd)\n\t{\n\t\tvar z = Math.floor(jd + 0.5);\n\t\tvar f = (jd + 0.5) - z;\n\n\t\tif (z < 2299161) {\n\t\t\tvar A = z;\n\t\t} else {\n\t\t\talpha = Math.floor((z - 1867216.25)/36524.25);\n\t\t\tvar A = z + 1 + alpha - Math.floor(alpha/4);\n\t\t}\n\n\t\tvar B = A + 1524;\n\t\tvar C = Math.floor((B - 122.1)/365.25);\n\t\tvar D = Math.floor(365.25 * C);\n\t\tvar E = Math.floor((B - D)/30.6001);\n\n\t\tvar day = B - D - Math.floor(30.6001 * E) + f;\n\t\tvar month = (E < 14) ? E - 1 : E - 13;\n\t\tvar year = (month > 2) ? C - 4716 : C - 4715;\n\n\t\treturn ((day<10 ? \"0\" : \"\") + day + monthList[month-1].abbr);\n\t}\n\n\n//***********************************************************************/\n//* Name:    calcTimeJulianCent\t\t\t\t\t\t\t*/\n//* Type:    Function\t\t\t\t\t\t\t\t\t*/\n//* Purpose: convert Julian Day to centuries since J2000.0.\t\t\t*/\n//* Arguments:\t\t\t\t\t\t\t\t\t\t*/\n//*   jd : the Julian Day to convert\t\t\t\t\t\t*/\n//* Return value:\t\t\t\t\t\t\t\t\t\t*/\n//*   the T value corresponding to the Julian Day\t\t\t\t*/\n//***********************************************************************/\n\n\tfunction calcTimeJulianCent(jd)\n\t{\n\t\tvar T = (jd - 2451545.0)/36525.0;\n\t\treturn T;\n\t}\n\n\n//***********************************************************************/\n//* Name:    calcJDFromJulianCent\t\t\t\t\t\t\t*/\n//* Type:    Function\t\t\t\t\t\t\t\t\t*/\n//* Purpose: convert centuries since J2000.0 to Julian Day.\t\t\t*/\n//* Arguments:\t\t\t\t\t\t\t\t\t\t*/\n//*   t : number of Julian centuries since J2000.0\t\t\t\t*/\n//* Return value:\t\t\t\t\t\t\t\t\t\t*/\n//*   the Julian Day corresponding to the t value\t\t\t\t*/\n//***********************************************************************/\n\n\tfunction calcJDFromJulianCent(t)\n\t{\n\t\tvar JD = t * 36525.0 + 2451545.0;\n\t\treturn JD;\n\t}\n\n\n//***********************************************************************/\n//* Name:    calGeomMeanLongSun\t\t\t\t\t\t\t*/\n//* Type:    Function\t\t\t\t\t\t\t\t\t*/\n//* Purpose: calculate the Geometric Mean Longitude of the Sun\t\t*/\n//* Arguments:\t\t\t\t\t\t\t\t\t\t*/\n//*   t : number of Julian centuries since J2000.0\t\t\t\t*/\n//* Return value:\t\t\t\t\t\t\t\t\t\t*/\n//*   the Geometric Mean Longitude of the Sun in degrees\t\t\t*/\n//***********************************************************************/\n\n\tfunction calcGeomMeanLongSun(t)\n\t{\n\t\tvar L0 = 280.46646 + t * (36000.76983 + 0.0003032 * t);\n\t\twhile(L0 > 360.0)\n\t\t{\n\t\t\tL0 -= 360.0;\n\t\t}\n\t\twhile(L0 < 0.0)\n\t\t{\n\t\t\tL0 += 360.0;\n\t\t}\n\t\treturn L0;\t\t// in degrees\n\t}\n\n\n//***********************************************************************/\n//* Name:    calGeomAnomalySun\t\t\t\t\t\t\t*/\n//* Type:    Function\t\t\t\t\t\t\t\t\t*/\n//* Purpose: calculate the Geometric Mean Anomaly of the Sun\t\t*/\n//* Arguments:\t\t\t\t\t\t\t\t\t\t*/\n//*   t : number of Julian centuries since J2000.0\t\t\t\t*/\n//* Return value:\t\t\t\t\t\t\t\t\t\t*/\n//*   the Geometric Mean Anomaly of the Sun in degrees\t\t\t*/\n//***********************************************************************/\n\n\tfunction calcGeomMeanAnomalySun(t)\n\t{\n\t\tvar M = 357.52911 + t * (35999.05029 - 0.0001537 * t);\n\t\treturn M;\t\t// in degrees\n\t}\n\n//***********************************************************************/\n//* Name:    calcEccentricityEarthOrbit\t\t\t\t\t\t*/\n//* Type:    Function\t\t\t\t\t\t\t\t\t*/\n//* Purpose: calculate the eccentricity of earth's orbit\t\t\t*/\n//* Arguments:\t\t\t\t\t\t\t\t\t\t*/\n//*   t : number of Julian centuries since J2000.0\t\t\t\t*/\n//* Return value:\t\t\t\t\t\t\t\t\t\t*/\n//*   the unitless eccentricity\t\t\t\t\t\t\t*/\n//***********************************************************************/\n\n\n\tfunction calcEccentricityEarthOrbit(t)\n\t{\n\t\tvar e = 0.016708634 - t * (0.000042037 + 0.0000001267 * t);\n\t\treturn e;\t\t// unitless\n\t}\n\n//***********************************************************************/\n//* Name:    calcSunEqOfCenter\t\t\t\t\t\t\t*/\n//* Type:    Function\t\t\t\t\t\t\t\t\t*/\n//* Purpose: calculate the equation of center for the sun\t\t\t*/\n//* Arguments:\t\t\t\t\t\t\t\t\t\t*/\n//*   t : number of Julian centuries since J2000.0\t\t\t\t*/\n//* Return value:\t\t\t\t\t\t\t\t\t\t*/\n//*   in degrees\t\t\t\t\t\t\t\t\t\t*/\n//***********************************************************************/\n\n\n\tfunction calcSunEqOfCenter(t)\n\t{\n\t\tvar m = calcGeomMeanAnomalySun(t);\n\n\t\tvar mrad = degToRad(m);\n\t\tvar sinm = Math.sin(mrad);\n\t\tvar sin2m = Math.sin(mrad+mrad);\n\t\tvar sin3m = Math.sin(mrad+mrad+mrad);\n\n\t\tvar C = sinm * (1.914602 - t * (0.004817 + 0.000014 * t)) + sin2m * (0.019993 - 0.000101 * t) + sin3m * 0.000289;\n\t\treturn C;\t\t// in degrees\n\t}\n\n//***********************************************************************/\n//* Name:    calcSunTrueLong\t\t\t\t\t\t\t\t*/\n//* Type:    Function\t\t\t\t\t\t\t\t\t*/\n//* Purpose: calculate the true longitude of the sun\t\t\t\t*/\n//* Arguments:\t\t\t\t\t\t\t\t\t\t*/\n//*   t : number of Julian centuries since J2000.0\t\t\t\t*/\n//* Return value:\t\t\t\t\t\t\t\t\t\t*/\n//*   sun's true longitude in degrees\t\t\t\t\t\t*/\n//***********************************************************************/\n\n\n\tfunction calcSunTrueLong(t)\n\t{\n\t\tvar l0 = calcGeomMeanLongSun(t);\n\t\tvar c = calcSunEqOfCenter(t);\n\n\t\tvar O = l0 + c;\n\t\treturn O;\t\t// in degrees\n\t}\n\n//***********************************************************************/\n//* Name:    calcSunTrueAnomaly\t\t\t\t\t\t\t*/\n//* Type:    Function\t\t\t\t\t\t\t\t\t*/\n//* Purpose: calculate the true anamoly of the sun\t\t\t\t*/\n//* Arguments:\t\t\t\t\t\t\t\t\t\t*/\n//*   t : number of Julian centuries since J2000.0\t\t\t\t*/\n//* Return value:\t\t\t\t\t\t\t\t\t\t*/\n//*   sun's true anamoly in degrees\t\t\t\t\t\t\t*/\n//***********************************************************************/\n\n\tfunction calcSunTrueAnomaly(t)\n\t{\n\t\tvar m = calcGeomMeanAnomalySun(t);\n\t\tvar c = calcSunEqOfCenter(t);\n\n\t\tvar v = m + c;\n\t\treturn v;\t\t// in degrees\n\t}\n\n//***********************************************************************/\n//* Name:    calcSunRadVector\t\t\t\t\t\t\t\t*/\n//* Type:    Function\t\t\t\t\t\t\t\t\t*/\n//* Purpose: calculate the distance to the sun in AU\t\t\t\t*/\n//* Arguments:\t\t\t\t\t\t\t\t\t\t*/\n//*   t : number of Julian centuries since J2000.0\t\t\t\t*/\n//* Return value:\t\t\t\t\t\t\t\t\t\t*/\n//*   sun radius vector in AUs\t\t\t\t\t\t\t*/\n//***********************************************************************/\n\n\tfunction calcSunRadVector(t)\n\t{\n\t\tvar v = calcSunTrueAnomaly(t);\n\t\tvar e = calcEccentricityEarthOrbit(t);\n \n\t\tvar R = (1.000001018 * (1 - e * e)) / (1 + e * Math.cos(degToRad(v)));\n\t\treturn R;\t\t// in AUs\n\t}\n\n//***********************************************************************/\n//* Name:    calcSunApparentLong\t\t\t\t\t\t\t*/\n//* Type:    Function\t\t\t\t\t\t\t\t\t*/\n//* Purpose: calculate the apparent longitude of the sun\t\t\t*/\n//* Arguments:\t\t\t\t\t\t\t\t\t\t*/\n//*   t : number of Julian centuries since J2000.0\t\t\t\t*/\n//* Return value:\t\t\t\t\t\t\t\t\t\t*/\n//*   sun's apparent longitude in degrees\t\t\t\t\t\t*/\n//***********************************************************************/\n\n\tfunction calcSunApparentLong(t)\n\t{\n\t\tvar o = calcSunTrueLong(t);\n\n\t\tvar omega = 125.04 - 1934.136 * t;\n\t\tvar lambda = o - 0.00569 - 0.00478 * Math.sin(degToRad(omega));\n\t\treturn lambda;\t\t// in degrees\n\t}\n\n//***********************************************************************/\n//* Name:    calcMeanObliquityOfEcliptic\t\t\t\t\t\t*/\n//* Type:    Function\t\t\t\t\t\t\t\t\t*/\n//* Purpose: calculate the mean obliquity of the ecliptic\t\t\t*/\n//* Arguments:\t\t\t\t\t\t\t\t\t\t*/\n//*   t : number of Julian centuries since J2000.0\t\t\t\t*/\n//* Return value:\t\t\t\t\t\t\t\t\t\t*/\n//*   mean obliquity in degrees\t\t\t\t\t\t\t*/\n//***********************************************************************/\n\n\tfunction calcMeanObliquityOfEcliptic(t)\n\t{\n\t\tvar seconds = 21.448 - t*(46.8150 + t*(0.00059 - t*(0.001813)));\n\t\tvar e0 = 23.0 + (26.0 + (seconds/60.0))/60.0;\n\t\treturn e0;\t\t// in degrees\n\t}\n\n//***********************************************************************/\n//* Name:    calcObliquityCorrection\t\t\t\t\t\t*/\n//* Type:    Function\t\t\t\t\t\t\t\t\t*/\n//* Purpose: calculate the corrected obliquity of the ecliptic\t\t*/\n//* Arguments:\t\t\t\t\t\t\t\t\t\t*/\n//*   t : number of Julian centuries since J2000.0\t\t\t\t*/\n//* Return value:\t\t\t\t\t\t\t\t\t\t*/\n//*   corrected obliquity in degrees\t\t\t\t\t\t*/\n//***********************************************************************/\n\n\tfunction calcObliquityCorrection(t)\n\t{\n\t\tvar e0 = calcMeanObliquityOfEcliptic(t);\n\n\t\tvar omega = 125.04 - 1934.136 * t;\n\t\tvar e = e0 + 0.00256 * Math.cos(degToRad(omega));\n\t\treturn e;\t\t// in degrees\n\t}\n\n//***********************************************************************/\n//* Name:    calcSunRtAscension\t\t\t\t\t\t\t*/\n//* Type:    Function\t\t\t\t\t\t\t\t\t*/\n//* Purpose: calculate the right ascension of the sun\t\t\t\t*/\n//* Arguments:\t\t\t\t\t\t\t\t\t\t*/\n//*   t : number of Julian centuries since J2000.0\t\t\t\t*/\n//* Return value:\t\t\t\t\t\t\t\t\t\t*/\n//*   sun's right ascension in degrees\t\t\t\t\t\t*/\n//***********************************************************************/\n\n\tfunction calcSunRtAscension(t)\n\t{\n\t\tvar e = calcObliquityCorrection(t);\n\t\tvar lambda = calcSunApparentLong(t);\n \n\t\tvar tananum = (Math.cos(degToRad(e)) * Math.sin(degToRad(lambda)));\n\t\tvar tanadenom = (Math.cos(degToRad(lambda)));\n\t\tvar alpha = radToDeg(Math.atan2(tananum, tanadenom));\n\t\treturn alpha;\t\t// in degrees\n\t}\n\n//***********************************************************************/\n//* Name:    calcSunDeclination\t\t\t\t\t\t\t*/\n//* Type:    Function\t\t\t\t\t\t\t\t\t*/\n//* Purpose: calculate the declination of the sun\t\t\t\t*/\n//* Arguments:\t\t\t\t\t\t\t\t\t\t*/\n//*   t : number of Julian centuries since J2000.0\t\t\t\t*/\n//* Return value:\t\t\t\t\t\t\t\t\t\t*/\n//*   sun's declination in degrees\t\t\t\t\t\t\t*/\n//***********************************************************************/\n\n\tfunction calcSunDeclination(t)\n\t{\n\t\tvar e = calcObliquityCorrection(t);\n\t\tvar lambda = calcSunApparentLong(t);\n\n\t\tvar sint = Math.sin(degToRad(e)) * Math.sin(degToRad(lambda));\n\t\tvar theta = radToDeg(Math.asin(sint));\n\t\treturn theta;\t\t// in degrees\n\t}\n\n//***********************************************************************/\n//* Name:    calcEquationOfTime\t\t\t\t\t\t\t*/\n//* Type:    Function\t\t\t\t\t\t\t\t\t*/\n//* Purpose: calculate the difference between true solar time and mean\t*/\n//*\t\tsolar time\t\t\t\t\t\t\t\t\t*/\n//* Arguments:\t\t\t\t\t\t\t\t\t\t*/\n//*   t : number of Julian centuries since J2000.0\t\t\t\t*/\n//* Return value:\t\t\t\t\t\t\t\t\t\t*/\n//*   equation of time in minutes of time\t\t\t\t\t\t*/\n//***********************************************************************/\n\n\tfunction calcEquationOfTime(t)\n\t{\n\t\tvar epsilon = calcObliquityCorrection(t);\n\t\tvar l0 = calcGeomMeanLongSun(t);\n\t\tvar e = calcEccentricityEarthOrbit(t);\n\t\tvar m = calcGeomMeanAnomalySun(t);\n\n\t\tvar y = Math.tan(degToRad(epsilon)/2.0);\n\t\ty *= y;\n\n\t\tvar sin2l0 = Math.sin(2.0 * degToRad(l0));\n\t\tvar sinm   = Math.sin(degToRad(m));\n\t\tvar cos2l0 = Math.cos(2.0 * degToRad(l0));\n\t\tvar sin4l0 = Math.sin(4.0 * degToRad(l0));\n\t\tvar sin2m  = Math.sin(2.0 * degToRad(m));\n\n\t\tvar Etime = y * sin2l0 - 2.0 * e * sinm + 4.0 * e * y * sinm * cos2l0\n\t\t\t\t- 0.5 * y * y * sin4l0 - 1.25 * e * e * sin2m;\n\n\t\treturn radToDeg(Etime)*4.0;\t// in minutes of time\n\t}\n\n\n\n\n\n\n\n\n// Return the hour angle for the given location, decl, and time of day\n\n\tfunction calcHourAngle(time, longitude, eqtime)\n\t{\n\t\treturn (15.0*(time - (longitude/15.0) - (eqtime/60.0)));\n\t\t// in degrees\n\t}\n\n\n// Returns decimal latitude from deg, min, sec entered in the form\t\n\n\tfunction getLatitude(latLongForm)\n\n\t{\n\t\tvar neg = 0;\n\t\tvar degs = parseFloat(latLongForm[\"latDeg\"].value);\n\t\tif (latLongForm[\"latDeg\"].value.charAt(0) == '-') {\n\t\t\tneg = 1;\n\t\t}\n\n\t\tvar mins = parseFloat(latLongForm[\"latMin\"].value);\n\n\t\tvar secs = parseFloat(latLongForm[\"latSec\"].value);\n\n\t\tif(neg != 1){\n\t\t\tvar decLat = degs + (mins / 60) + (secs / 3600);\n\t\t} else if(neg == 1){\n\t\t\tvar decLat = degs - (mins / 60) - (secs / 3600);\n\t\t} else {\n\t\t\treturn -9999;\n\t\t}\n\t\treturn decLat;\n\n\t}\t\n// Returns decimal longitude from the deg, min, sec entered in the form\t\n\n\tfunction getLongitude(latLongForm)\n\n\t{\n\t\tvar neg = 0;\n\t\tvar degs = parseFloat(latLongForm[\"lonDeg\"].value);\n\t\tif (latLongForm[\"lonDeg\"].value.charAt(0) == '-') {\n\t\t\tneg = 1;\n\t\t}\n\n\t\tvar mins = parseFloat(latLongForm[\"lonMin\"].value);\n\n\t\tvar secs = parseFloat(latLongForm[\"lonSec\"].value);\n\n\t\tvar decLon = degs + (mins / 60) + (secs / 3600);\n\n\t\tif(neg != 1){\n        \t\tvar decLon = degs + (mins / 60) + (secs / 3600);\n\t\t} else if(neg == 1){\n        \t\tvar decLon = degs - (mins / 60) - (secs / 3600);\n\t\t} else {\n\t\t\treturn -9999;\n\t\t}\n\t\treturn decLon;\n\n\t}\n\n\n// *****************************************************\n// *****************************************************\n// ***********  Main calculation routine  **************\n// *****************************************************\n// *****************************************************\n\n//***********************************************************************/\n//* Name:    calcSun\t\t\t\t\t\t\t\t\t*/\n//* Type:    Main Function called by form controls\t\t\t\t*/\n//* Purpose: calculate solar position for the entered date, time and\t*/\n//*\t\tlocation.  Results are reported in azimuth and elevation\t*/\n//*\t\t(in degrees) and cosine of solar zenith angle.\t\t\t*/\n//* Arguments:\t\t\t\t\t\t\t\t\t\t*/\n//*   riseSetForm : for displaying results\t\t\t\t\t*/\n//*   latLongForm : for reading latitude and longitude data\t\t\t*/\n//*   index : daylight saving yes/no select\t\t\t\t\t*/\n//*   index2 : city select index\t\t\t\t\t\t\t*/\n//* Return value:\t\t\t\t\t\t\t\t\t\t*/\n//*   none\t\t\t\t\t\t\t\t\t\t\t*/\n//*\t(fills riseSetForm text fields with results of calculations)\t*/\n//***********************************************************************/\n\n\tfunction calcSun(riseSetForm, latLongForm, index, index2) \n\t{\n\t\tif(index2 != 0)\n\t\t{\n\t\t\tsetLatLong(latLongForm, index2);\n\t\t}\n\t\tvar latitude = getLatitude(latLongForm);\n\t\tvar longitude = getLongitude(latLongForm);\n\t\tvar indexRS = riseSetForm.mos.selectedIndex\n\t\tif (isValidInput(riseSetForm, indexRS, latLongForm)) \n\t\t{\n\t\t\tif((latitude >= -90) && (latitude < -89.8))\n\t\t\t{\n\t\t\t\talert(\"All latitudes between 89.8 and 90 S\\n will be set to -89.8.\");\n\t\t\t\tlatLongForm[\"latDeg\"].value = -89.8;\n\t\t\t\tlatitude = -89.8;\n\t\t\t}\n\t\t\tif ((latitude <= 90) && (latitude > 89.8))\n\t\t\t{\n\t\t            alert(\"All latitudes between 89.8 and 90 N\\n will be set to 89.8.\");\n\t\t\t\tlatLongForm[\"latDeg\"].value = 89.8;\n\t\t\t\tlatitude = 89.8;\n\t\t\t}\n\n\t//*****\tGet calc date/time\t\t\t\n\n//\t\t\tvar julDay = calcJulianDay(indexRS, \n//\t\t\t\tparseFloat(riseSetForm[\"day\"].value), \n//\t\t\t\tisLeapYear(riseSetForm[\"year\"].value));\n\n\t\t\tvar zone = parseFloat(latLongForm[\"hrsToGMT\"].value);\n\t\t\tvar daySavings = YesNo[index].value;  // = 0 (no) or 60 (yes)\n\n\t\t\tif(zone > 12 || zone < -12.5)\n\t\t\t{\n\t\t\t\talert(\"The offset must be between -12.5 and 12.  \\n Setting \\\"Off-Set\\\"=0\");\n\t\t\t\tzone = \"0\";\n\t\t\t\tlatLongForm[\"hrsToGMT\"].value = zone;\n\t\t\t}\n\n\t\t\tvar ss = parseFloat(riseSetForm[\"secs\"].value);\n\t\t\tvar mm = parseFloat(riseSetForm[\"mins\"].value);\n\t\t\tvar hh = parseFloat(riseSetForm[\"hour\"].value) - (daySavings/60);\n\t\t\tif(riseSetForm.ampm[1].checked) \n\t\t\t{\n\t\t\t\thh += 12;\n\t\t\t}\n\t\t\twhile (hh > 23) \n\t\t\t{\n\t\t\t\thh -= 24;\n\t\t\t}\n\t\t\triseSetForm[\"hour\"].value = hh + (daySavings/60);\n\t\t\tif (mm > 9) \n\t\t\t{\n\t\t\t\triseSetForm[\"mins\"].value = mm;\n\t\t\t}\n\t\t\telse \n\t\t\t{\n\t\t\t\triseSetForm[\"mins\"].value = \"0\" + mm;\n\t\t\t}\n\t\t\tif (ss > 9) \n\t\t\t{\n\t\t\t\triseSetForm[\"secs\"].value = ss;\n\t\t\t}\n\t\t\telse \n\t\t\t{\n\t\t\t\triseSetForm[\"secs\"].value = \"0\" + ss;\n\t\t\t}\n\t\t\triseSetForm.ampm[2].checked = 1;\n\n// timenow is GMT time for calculation\n\t\t\ttimenow = hh + mm/60 + ss/3600 + zone;\t// in hours since 0Z\n\t\t\t//alert(\"timenow = \" + timenow);\n\n\n\t\t\tvar JD = (calcJD(parseFloat(riseSetForm[\"year\"].value), indexRS + 1, parseFloat(riseSetForm[\"day\"].value)));\n\t\t\tvar dow = calcDayOfWeek(JD);\n\t\t\tvar doy = calcDayOfYear(indexRS + 1, parseFloat(riseSetForm[\"day\"].value), isLeapYear(riseSetForm[\"year\"].value));\n\t\t\tvar T = calcTimeJulianCent(JD + timenow/24.0); \n\t\t\t//var L0 = calcGeomMeanLongSun(T);\n\t\t\t//var M = calcGeomMeanAnomalySun(T);\n\t\t\t//var e = calcEccentricityEarthOrbit(T);\n\t\t\t//var C = calcSunEqOfCenter(T);\n\t\t\t//var O = calcSunTrueLong(T);\n\t\t\t//var v = calcSunTrueAnomaly(T);\n\t\t\tvar R = calcSunRadVector(T);\n\t\t\t//var lambda = calcSunApparentLong(T);\n\t\t\t//var epsilon0 = calcMeanObliquityOfEcliptic(T);\n\t\t\t//var epsilon = calcObliquityCorrection(T);\n\t\t\tvar alpha = calcSunRtAscension(T);\n\t\t\tvar theta = calcSunDeclination(T);\n\t\t\tvar Etime = calcEquationOfTime(T);\n\n\t\t\tvar eqTime = Etime;\n\t\t\tvar solarDec = theta; // in degrees\n\t\t\tvar earthRadVec = R;\n\n\t\t\triseSetForm[\"eqTime\"].value = (Math.floor(100*eqTime))/100;\n\t\t\triseSetForm[\"solarDec\"].value = (Math.floor(100*(solarDec)))/100;\n\n\t\t\tvar solarTimeFix = eqTime - 4.0 * longitude + 60.0 * zone;\n\t\t\tvar trueSolarTime = hh * 60.0 + mm + ss/60.0 + solarTimeFix;\n\t\t\t// in minutes\n\n\t\t\twhile (trueSolarTime > 1440)\n\t\t\t{\n\t\t\t\ttrueSolarTime -= 1440;\n\t\t\t}\n\n\t\t\t//var hourAngle = calcHourAngle(timenow, longitude, eqTime);\n\t\t\tvar hourAngle = trueSolarTime / 4.0 - 180.0;\n\t\t\t// Thanks to Louis Schwarzmayr for finding our error,\n\t\t\t// and providing the following 4 lines to fix it:\n\t\t\tif (hourAngle < -180) \n\t\t\t{\n\t\t\t  hourAngle += 360.0;\n\t\t\t}\n\t\t\t// alert (\"Hour Angle = \" + hourAngle);\n\n\t\t\tvar haRad = degToRad(hourAngle);\n\n\t\t\tvar csz = Math.sin(degToRad(latitude)) * \n\t\t\t\tMath.sin(degToRad(solarDec)) + \n\t\t\t\tMath.cos(degToRad(latitude)) * \n\t\t\t\tMath.cos(degToRad(solarDec)) * Math.cos(haRad);\n\t\t\tif (csz > 1.0) \n\t\t\t{\n\t\t\t\tcsz = 1.0;\n\t\t\t} else if (csz < -1.0) \n\t\t\t{ \n\t\t\t\tcsz = -1.0; \n\t\t\t}\n\t\t\tvar zenith = radToDeg(Math.acos(csz));\n\n\t\t\tvar azDenom = ( Math.cos(degToRad(latitude)) *\n\t\t\t\t\tMath.sin(degToRad(zenith)) );\n\t\t\tif (Math.abs(azDenom) > 0.001) {\n\t\t\t\tazRad = (( Math.sin(degToRad(latitude)) * \n\t\t\t\t\tMath.cos(degToRad(zenith)) ) - \n\t\t\t\t\tMath.sin(degToRad(solarDec))) / azDenom;\n\t\t\t\tif (Math.abs(azRad) > 1.0) {\n\t\t\t\t\tif (azRad < 0) {\n\t\t\t\t\t\tazRad = -1.0;\n\t\t\t\t\t} else {\n\t\t\t\t\t\tazRad = 1.0;\n\t\t\t\t\t}\n\t\t\t\t}\n\n\t\t\t\tvar azimuth = 180.0 - radToDeg(Math.acos(azRad));\n\n\t\t\t\tif (hourAngle > 0.0) {\n\t\t\t\t\tazimuth = -azimuth;\n\t\t\t\t}\n\t\t\t} else {\n\t\t\t\tif (latitude > 0.0) {\n\t\t\t\t\tazimuth = 180.0;\n\t\t\t\t} else { \n\t\t\t\t\tazimuth = 0.0;\n\t\t\t\t}\n\t\t\t}\n\t\t\tif (azimuth < 0.0) {\n\t\t\t\tazimuth += 360.0;\n\t\t\t}\n\n\t\t\texoatmElevation = 90.0 - zenith;\n\t\t\tif (exoatmElevation > 85.0) {\n\t\t\t\trefractionCorrection = 0.0;\n\t\t\t} else {\n\t\t\t\tte = Math.tan (degToRad(exoatmElevation));\n\t\t\t\tif (exoatmElevation > 5.0) {\n\t\t\t\t\trefractionCorrection = 58.1 / te - 0.07 / (te*te*te) +\n\t\t\t\t\t\t0.000086 / (te*te*te*te*te);\n\t\t\t\t} else if (exoatmElevation > -0.575) {\n\t\t\t\t\trefractionCorrection = 1735.0 + exoatmElevation *\n\t\t\t\t\t\t(-518.2 + exoatmElevation * (103.4 +\n\t\t\t\t\t\texoatmElevation * (-12.79 + \n\t\t\t\t\t\texoatmElevation * 0.711) ) );\n\t\t\t\t} else {\n\t\t\t\t\trefractionCorrection = -20.774 / te;\n\t\t\t\t}\n\t\t\t\trefractionCorrection = refractionCorrection / 3600.0;\n\t\t\t}\n\n\t\t\tsolarZen = zenith - refractionCorrection;\n\t\t\t\t\t\n\t\t\tif(solarZen < 108.0) { // astronomical twilight\t\n\t\t\t  riseSetForm[\"azimuth\"].value = (Math.floor(100*\nazimuth))/100;\n\t\t\t  riseSetForm[\"elevation\"].value = (Math.floor(100*\n(90.0 - solarZen)))/100;\n\t\t\t  if (solarZen < 90.0) {\n\t\t\t\triseSetForm[\"coszen\"].value = \n(Math.floor(10000.0*(Math.cos(degToRad(solarZen)))))/10000.0;\n\t\t\t  } else {\n\t\t\t\triseSetForm[\"coszen\"].value = 0.0;\n\t\t\t  }\n\t\t\t} else {  // do not report az & el after astro twilight\n\t\t\t  riseSetForm[\"azimuth\"].value = \"dark\";\n\t\t\t  riseSetForm[\"elevation\"].value = \"dark\";\n\t\t\t  riseSetForm[\"coszen\"].value = 0.0;\n\t\t\t}\n\n\t\t//***********Conv lat and long\n\t\t\tconvLatLong(latLongForm);\n\t\t} else {\t\t\t// end of IF ISVALIDINPUT\n\t\t\triseSetForm[\"azimuth\"].value = \"error\";\n\t\t\triseSetForm[\"elevation\"].value = \"error\";\n\t\t\triseSetForm[\"eqTime\"].value = \"error\";\n\t\t\triseSetForm[\"solarDec\"].value = \"error\";\n\t\t\triseSetForm[\"coszen\"].value = \"error\";\n\n\t\t\t// alert(\"Invalid Input\");\n\t\t}\n\t}\n\n</SCRIPT>\n\n<FORM NAME=\"cityLatLong\">\n\t<CENTER><TABLE BORDER>\n\t<TR>\n\t\t<TD ALIGN=\"CENTER\"><H5>City:</TD>\n\t\t<TD></TD>\n\t\t<TD ALIGN=\"CENTER\"><H5>Deg:</TD>\n\t\t<TD ALIGN=\"CENTER\"><H5>Min:</TD>\n\t\t<TD ALIGN=\"CENTER\"><H5>Sec:</TD>\n\t\t<TD ALIGN=\"CENTER\" COLSPAN=\"2\"><H5><a href=\"./timezone.html\">Time \t\t\t\tZone</TD>\n\t</TR>\n\n\t<TR>\n\t<TD ALIGN=\"TOP\">\n\t<CENTER>\n\t<SELECT NAME=\"cities\" onChange=\"calcSun(solPosCalc, cityLatLong, cityLatLong.dayAns.selectedIndex, cityLatLong.cities.selectedIndex);\">\n\n\t\t<SCRIPT LANGUAGE=\"JavaScript\">\n\t    \t\tfor (i = 0; i < City.length; i++) {\n\t\t\t\tif(City[i].name == \"Boulder, CO\")\n\t\t\t\t{\n\t\t\t\tdocument.writeln(\"<OPTION SELECTED>\" + City[i].name);\n\t    \t\t}\n\t\t\t\telse\n\t\t\t\tdocument.writeln(\"<OPTION>\" + City[i].name);\n\t\t\t\t} \n\n\t\t</SCRIPT>\n\t</SELECT>\n\t</CENTER>\n\t</TD>\n\t<TD ALIGN=\"CENTER\"><H5><a href=\"./glossary.html#latitude\">Lat</a>:\n\t\t<BR>North=+<BR>South=<FONT SIZE = 4>-</FONT>\n\t</TD>\n\t<TD><INPUT TYPE=\"text\" NAME=\"latDeg\" VALUE=\"40\" SIZE=\"4\"></TD>\n\t<TD><INPUT TYPE=\"text\" NAME=\"latMin\" VALUE=\"7\" SIZE=\"4\"></TD>\n\t<TD><INPUT TYPE=\"text\" NAME=\"latSec\" VALUE=\"30\" SIZE=\"4\"></TD>\n\t<TD ROWSPAN=2 ALIGN=\"CENTER\"><H5>Offset<BR>to \n\t\t<a href=\"./glossary.html#UTC\">UTC</a><BR>(MST=+7):<BR></H5>\n\t<INPUT TYPE=\"text\" NAME=\"hrsToGMT\" VALUE=\"7\" SIZE=\"5\"></TD>\n\t<TD ROWSPAN=2 ALIGN = \"CENTER\"><H5>\n\t\t<a href=\"./glossary.html#daylightsavingtime\">Daylight<BR>Saving<BR>Time</a>:\n\t\t<BR></H5>\n\t<SELECT NAME=\"dayAns\" onChange=\"calcSun(solPosCalc, cityLatLong, cityLatLong.dayAns.selectedIndex, cityLatLong.cities.selectedIndex);\">\n\t<SCRIPT LANGUAGE=\"JavaScript\">\n\t\tfor(i=0; i < YesNo.length; i++)\n\t\t{\n\t\t\tdocument.writeln(\"<OPTION>\" + YesNo[i].daySave);\n\t\t}\n\t</SCRIPT>\n\t</SELECT>\n\t</TD>\n\t</TR>\n\n\t<TR>\n\t\t<TD ALIGN=\"CENTER\"><H5><a href=\"./sollinks.html#latlong\">Click here for help finding<br>\n\t\t\tyour lat/long coordinates</a>\n\t\t</TD>\n\n\t\t<TD ALIGN=\"CENTER\"><H5><a href=\"./glossary.html#longitude\">Long</a>:\n\t\t\t<BR>East=<FONT SIZE = 4>-</FONT><BR>West=+\n\t\t</TD>\n\n\t\t<TD><INPUT TYPE=\"text\" NAME=\"lonDeg\" VALUE=\"105\" SIZE=\"4\"></TD>\n\t\t<TD><INPUT TYPE=\"text\" NAME=\"lonMin\" VALUE=\"14\" SIZE=\"4\"></TD>\n\t\t<TD><INPUT TYPE=\"text\" NAME=\"lonSec\" VALUE=\"13\" SIZE=\"4\"></TD>\n\t</TR>\n\t<TR>\n\t\t<TD COLSPAN=7>\n\t\t<b>Note:</b>  To manually enter latitude/longitude, select <b>Enter\n\t\t\tLat/Long -></b> from the<br>City pulldown box, and enter the\n\t\t\tvalues in the text boxes to the right.\n\t\t</TD>\n\t</TR>\n\t</TABLE>\n\n</FORM>\n\n<FORM NAME=\"solPosCalc\">\n\t<CENTER><TABLE BORDER>\n\t<TR>\n\t  \t<TD ALIGN=\"CENTER\"><H5>Month:</TD>\n\t\t<TD ALIGN=\"CENTER\"><H5>Day:</TD>\n\t\t<TD ALIGN=\"CENTER\"><H5>Year (e.g. 2000):</TD>\n\t\t<TD ALIGN=\"CENTER\"><H5>Time: (hh:mm:ss)</TD>\n\t</TR>\n\t<TR>\n\t  \t<TD>\n\t\t\t<SELECT NAME=\"mos\" onChange=\"calcSun(solPosCalc, cityLatLong, cityLatLong.dayAns.selectedIndex, cityLatLong.cities.selectedIndex);\">\n\t\t  \t<SCRIPT LANGUAGE=\"JavaScript\">\n\t \t\t\tdateObj1 = new Date();\n\t\t\t    \tthismonth = dateObj1.getMonth();\n\t\t\t     \ttoday = dateObj1.getDate(); \n\t\t\t     \tfor (i = 0; i < monthList.length; i++) {\n\t\t\t\t     \tif (i == thismonth) {\n\t\t\t\t     \tdocument.writeln(\"<OPTION SELECTED>\" + monthList[i].name);\n        \t\t\t\t}\n\t\t\t\t\telse {\n\t\t\t\t\tdocument.writeln(\"<OPTION>\" + monthList[i].name);\n\t\t\t\t\t}\n\t\t\t\t}\n\t    \t\t</SCRIPT>\n\t  \t\t</SELECT>\n\t  \t</TD>\n\t\t\t<SCRIPT LANGUAGE=\"JavaScript\">\n\t\t\t\tdateObj2 = new Date();\n\t\t\t\tthisday = dateObj2.getDate();\n\t\t\t\tdocument.writeln(\"<TD><CENTER><INPUT TYPE=\\\"text\\\" NAME=\\\"day\\\" SIZE=\\\"2\\\" VALUE=\\\"\" + thisday + \"\\\"></TD>\");\n\t\t\t</SCRIPT>\n\n\t\t\t<SCRIPT LANGUAGE=\"JavaScript\">\n\t\t\t\tdateObj3 = new Date();\n\t\t\t\tthisYear = dateObj3.getYear();\n\t\t\t\tif(thisYear <=199){\n\t\t\t\t\tthisYear=(thisYear*1)+1900;\n\t\t\t\t}\n\t\t\t\tdocument.writeln(\"<TD><CENTER><INPUT TYPE=\\\"text\\\" NAME=\\\"year\\\" SIZE=\\\"4\\\"VALUE=\\\"\" + thisYear*1 + \"\\\"></TD>\");\n\t\t\t</SCRIPT>\n\n\t\t\t<TD><CENTER>\n\t\t\t<SCRIPT LANGUAGE=\"JavaScript\">\n\t\t\t\tdateObj4 = new Date();\n\t\t\t\tnowhour = dateObj4.getHours();\n\t\t\t\tnowmins = dateObj4.getMinutes();\n\t\t\t\tnowsecs = dateObj4.getSeconds();\n\t\t\t\tdocument.writeln(\"<INPUT TYPE=\\\"text\\\" NAME=\\\"hour\\\" SIZE=\\\"2\\\"VALUE=\\\"\" + nowhour*1 + \"\\\"> <b>:</b>\");\n\t\t\t\tdocument.writeln(\"<INPUT TYPE=\\\"text\\\" NAME=\\\"mins\\\" SIZE=\\\"2\\\"VALUE=\\\"\" + nowmins*1 + \"\\\"> <b>:</b>\");\n\t\t\t\tdocument.writeln(\"<INPUT TYPE=\\\"text\\\" NAME=\\\"secs\\\" SIZE=\\\"2\\\"VALUE=\\\"\" + nowsecs*1 + \"\\\">\");\n\t\t\t</SCRIPT>\n\t\t\t<INPUT TYPE=\"radio\" NAME=\"ampm\" VALUE=\"AM\">AM  \n\t\t\t<INPUT TYPE=\"radio\" NAME=\"ampm\" VALUE=\"PM\">PM  \n\t\t\t<INPUT TYPE=\"radio\" NAME=\"ampm\" VALUE=\"24\" CHECKED>24hr  \n\t\t\t</TD>\n\t</TR>\n\t</TABLE>\n\n<br>\n\n\t  \t<INPUT TYPE=\"button\" NAME=\"RiseSet\" VALUE=\"  Calculate Solar Position  \" onClick=\"calcSun(solPosCalc, cityLatLong, cityLatLong.dayAns.selectedIndex, cityLatLong.cities.selectedIndex);\">\n<BR>\n<BR>\n\n<TABLE BORDER>\n\t<TR>\t\n\t\t<TD ALIGN=\"CENTER\"><H5>\n\t\t<a href=\"./glossary.html#equationoftime\">Equation <BR>of Time</a>\n\t\t\t<BR>(minutes):</TD>\n\t\t<TD ALIGN=\"CENTER\"><H5>\n\t\t<a href=\"./glossary.html#solardeclination\">Solar<BR>Declination</a><BR>\n\t\t\t(degrees):</TD>\n\t\t<TD ALIGN=\"CENTER\"><H5>Solar<BR>\n\t\t<a href=\"./glossary.html#azimuthelevation\">Azimuth</a>:</TD>\n\t\t<TD ALIGN=\"CENTER\"><H5>Solar<BR>\n\t\t<a href=\"./glossary.html#azimuthelevation\">Elevation</a>:</TD>\n\t\t<TD ALIGN=\"CENTER\"><H5>cosine of<BR>solar\n\t\t<a href=\"./glossary.html#zenithangle\">zenith<BR>angle</a></TD>\n\t</TR>\n\t<TR>\n\t\t<TD><CENTER><INPUT TYPE=\"text\" NAME=\"eqTime\" SIZE = \"8\"></TD>\n\t\t<TD><CENTER><INPUT TYPE=\"text\" NAME=\"solarDec\" SIZE = \"8\"></TD>\n\t\t<TD><CENTER><INPUT TYPE=\"text\" NAME=\"azimuth\" SIZE=\"8\"></TD>\n\t\t<TD><CENTER><INPUT TYPE=\"text\" NAME=\"elevation\" SIZE=\"8\"></TD>\n\t\t<TD><CENTER><INPUT TYPE=\"text\" NAME=\"coszen\" SIZE=\"8\"></TD>\n\t</TR>\n\t<TR>\n\t<TD COLSPAN=\"5\" align=\"center\"><H5>Azimuth is measured in degrees clockwise from north.<br>\n\t\t\tElevation is measured in degrees up from the horizon.<br>\n\t\t\tAz & El both report <i>dark</i> after <a href=\"./glossary.html#astronomicaltwilight\">astronomical twilight</a>.\n\t</TD>\n</TABLE>\n\n</CENTER>\n</FORM></FONT>\n</CENTER>\n\n<HR>\n<B><H3>Directions:</H3></B><BR>\n\n<H4>\n<OL>\n<LI>\n<FONT SIZE=2>\nSelect a location from the City pulldown menu, <U>OR</U> select <b>\"Enter \nLat/Long ->\"</b> from the pulldown menu, and manually enter the latitude, \nlongitude and time zone information in the appropriate text boxes. For this calculator,\nlatitude is positive to the NORTH, and longitude is positive to the WEST of\nthe prime meridian. \n</P>\n<P>\nLatitude and Longitude can be in deg/min/sec, or decimal degrees entered in \nthe \"Deg:\" field.  (If you enter decimal degrees in the degrees field, please \nclear the minutes and seconds fields, or they will be added in.)  If you \nselect a city from the pulldown menu, the latitude, longitude and time zone fields \nwill be filled in by the program.  If you want to input latitude, longitude\nor time zone manually, <u>be sure to\nselect \"Enter Lat/Long -->\" from the City pulldown box, or your numbers will\nbe overwritten</u> by the selected city's location.\n</P>\n</FONT>\n</LI>\n<LI>\n<P>\n<FONT SIZE=2>You can enter a different time zone for a location by selecting \n\"Enter Lat/Long -->\" in the City pulldown box.  Otherwise the time zone \nassociated with the selected city's Local Standard Time will be automatically\nentered.  \nSelecting \"Yes\" in the Daylight Saving field will cause the solar position\ncalculation to assume the current time has been adjusted forward one hour from\nstandard time.  If you are uncertain of the time zone for a location, refer to \nour <a href=\"./timezone.html\">Time Zone Table</a>. \n</P>\n</FONT>\n</LI>\n<LI>\n<P>\n<FONT SIZE=2>The program retrieves the current date and time from your computer, and fills \nin these values in the date/time fields.  To perform calculations for a \ndifferent date, simply select the month in the pulldown box, and enter the \nday and four digit year in the appropriate input boxes.  Time of day for the \ncalculation can be changed in the same way.\n</P>\n</FONT>\n</LI>\n<LI>\n<P>\n<FONT SIZE=2>Hit the \"Calculate Solar Position\" button.  Once the calculations \nare complete, you may use your browser's \"Print\" function to obtain a hardcopy \nof the results.  Results are given in the following units:  Equation of Time in \nminutes of time; Solar Declination in degrees, with positive to the north;\nAzimuth in degrees clockwise from north; Elevation in degrees up from the\nhorizon; Cosine of Solar Zenith Angle is unitless.\n</P>\n</FONT>\n</LI>\n<LI>\n<P>\n<FONT SIZE=2>Note that for latitudes greater than \n72&deg; north or less than 72&deg; south, accuracy may be lower due in \npart to the effects of \n<a href=\"./glossary.html#atmosphericrefraction\">atmospheric refraction</a>.\n</P>\n</FONT>\n</LI>\n</OL>\n</H4>\n\n</FONT>\n<BR>\n<HR>\n\n<h4>\n<table border=0 width=\"100%\">\n<tr>\n<td align=\"left\">\n<a href=\"./sunrise.html\">Sunrise/Sunset Calculator</a><br>\n<a href=\"./calcdetails.html\">Calculation Details</a><br>\n<a href=\"./sollinks.html\">Solar Calculator Links</a><br>\n</td>\n\n<td align=\"center\">\n<a href=\"http://www.noaa.gov/\"><img src=\"noaaemblemt.gif\" border=\"0\" alt=\"NOAA Emblem\"></a>\n</td>\n\n<td align=\"right\">\n<a href=\"./timezone.html\">Time Zone Table</a><br>\n<a href=\"./glossary.html\">Solar Calculator Glossary</a><br>\n<a href=\"/index.html\">Back to SRRB Homepage</a><br>\n</td>\n</tr>\n</table>\n\n</h4>\n\n<center>by \n<a href=\"mailto:&#119;&#101;&#98;&#109;&#97;&#115;&#116;&#101;&#114;-&#115;&#114;&#114;&#98;&#46;gm&#100;&#64;n&#111;&#97;&#97;&#46;&#103;&#111;&#118;\">Chris Cornwall</a>,\nAaron Horiuchi and Chris Lehman<br>\n\t<SCRIPT>\n\t\tdocument.write(\"Last Updated on \" + document.lastModified + \".\");\n\t</SCRIPT>\n</center>\n\n</BODY>\n</HTML>\n",
      "language": "HTML"
    },
    "README": {
      "raw_url": "https://gist.github.com/raw/1224222/a6a53eebddde2a205bc978b4e6d64330f8ac7c63/README",
      "type": "text/plain",
      "filename": "README",
      "size": 26,
      "content": "sunrise sunset stuff in d3",
      "language": null
    },
    "index.html": {
      "raw_url": "https://gist.github.com/raw/1224222/4a58e414c1e40f009a3874b32eb24d9322129ca6/index.html",
      "type": "text/html",
      "filename": "index.html",
      "size": 8629,
      "content": "<!DOCTYPE html>\n<html>\n<head>\n<title>Sunrise sunset</title>\n<script type=\"text/javascript\" src=\"https://raw.github.com/bewest/d3/bewest/d3.js\"></script>\n<script type=\"text/javascript\" src=\"https://raw.github.com/bewest/d3/bewest/d3.time.js\"></script>\n<script type=\"text/javascript\">\nvar width = 700;\nvar height = 525;\nvar padding = 40;\n\n// the vertical axis is a time scale that runs from 00:00 - 23:59\n// the horizontal axis is a time scale that runs from the 2011-01-01 to 2011-12-31\n\nvar y = d3.time.scale().domain([new Date(2011, 0, 1), new Date(2011, 0, 1, 23, 59)]).range([0, height]);\nvar x = d3.time.scale().domain([new Date(2011, 0, 1), new Date(2011, 11, 31)]).range([0, width]);\n\nvar monthNames = [\"Jan\", \"Feb\", \"Mar\", \"April\", \"May\", \"Jun\", \"Jul\", \"Aug\", \"Sep\", \"Oct\", \"Nov\", \"Dec\"];\n\n// Sunrise and sun set times for dates in 2011. I have picked the 1st\n// and 15th day of every month, plus other important dates like equinoxes\n// and solstices and dates around the standard time/DST transition.\n\nvar data = [\n  {date: new Date(2011, 0, 1), sunrise: [7, 51], sunset: [16, 42]},\n  {date: new Date(2011, 0, 15), sunrise: [7, 48], sunset: [16, 58]},\n  {date: new Date(2011, 1, 1), sunrise: [7, 33], sunset: [17, 21]},\n  {date: new Date(2011, 1, 15), sunrise: [7, 14], sunset: [17, 41]},\n  {date: new Date(2011, 2, 1), sunrise: [6, 51], sunset: [18, 0]},\n  {date: new Date(2011, 2, 12), sunrise: [6, 32], sunset: [18, 15]}, // dst - 1 day\n  {date: new Date(2011, 2, 13), sunrise: [7, 30], sunset: [19, 16]}, // dst\n  {date: new Date(2011, 2, 14), sunrise: [7, 28], sunset: [19, 18]}, // dst + 1 day\n  {date: new Date(2011, 2, 14), sunrise: [7, 26], sunset: [19, 19]},\n  {date: new Date(2011, 2, 20), sunrise: [07, 17], sunset: [19, 25]}, // equinox\n  {date: new Date(2011, 3, 1), sunrise: [6, 54], sunset: [19, 41]},\n  {date: new Date(2011, 3, 15), sunrise: [6, 29], sunset: [19, 58]},\n  {date: new Date(2011, 4, 1), sunrise: [6, 3], sunset: [20, 18]},\n  {date: new Date(2011, 4, 15), sunrise: [5, 44], sunset: [20, 35]},\n  {date: new Date(2011, 5, 1), sunrise: [5, 30], sunset: [20, 52]},\n  {date: new Date(2011, 5, 15), sunrise: [5, 26], sunset: [21, 1]},\n  {date: new Date(2011, 5, 21), sunrise: [5, 26], sunset: [21, 3]}, // solstice\n  {date: new Date(2011, 6, 1), sunrise: [5, 30], sunset: [21, 3]},\n  {date: new Date(2011, 6, 15), sunrise: [5, 41], sunset: [20, 57]},\n  {date: new Date(2011, 7, 1), sunrise: [5, 58], sunset: [20, 40]},\n  {date: new Date(2011, 7, 15), sunrise: [6, 15], sunset: [20, 20]},\n  {date: new Date(2011, 8, 1), sunrise: [6, 35], sunset: [19, 51]},\n  {date: new Date(2011, 8, 15), sunrise: [6, 51], sunset: [19, 24]},\n  {date: new Date(2011, 8, 23), sunrise: [7, 1], sunset: [19, 9]}, // equinox\n  {date: new Date(2011, 9, 1), sunrise: [7, 11], sunset: [18, 54]},\n  {date: new Date(2011, 9, 15), sunrise: [7, 28], sunset: [18, 29]},\n  {date: new Date(2011, 10, 1), sunrise: [7, 51], sunset: [18, 2]},\n  {date: new Date(2011, 10, 5), sunrise: [7, 57], sunset: [17, 56]}, // last day of dst\n  {date: new Date(2011, 10, 6), sunrise: [6, 58], sunset: [16, 55]}, // standard time\n  {date: new Date(2011, 10, 7), sunrise: [6, 59], sunset: [16, 54]}, // standard time + 1\n  {date: new Date(2011, 10, 15), sunrise: [7, 10], sunset: [16, 44]},\n  {date: new Date(2011, 11, 1), sunrise: [7, 31], sunset: [16, 33]},\n  {date: new Date(2011, 11, 15), sunrise: [7, 44], sunset: [16, 32]},\n  {date: new Date(2011, 11, 22), sunrise: [7, 49], sunset: [16, 35]}, // solstice\n  {date: new Date(2011, 11, 31), sunrise: [7, 51], sunset: [16, 41]}\n];\n\nfunction yAxisLabel(d) {\n  if (d == 12) { return \"noon\"; }\n  if (d < 12) { return d; }\n  return (d - 12);\n}\n\n// The labels along the x axis will be positioned on the 15th of the\n// month\n\nfunction midMonthDates() {\n  return d3.range(0, 12).map(function(i) { return new Date(2011, i, 15) });\n}\n\n</script>\n<style type=\"text/css\">\n/**** STYLES *****/\ndiv#day-length text {\n  fill: gray;\n  font-family: Helvetica, sans-serif;\n  font-size: 10px;\n}\nbody {\n}\n#vis {\n  height: 700px;\n}\n</style>\n</head>\n<body>\n<h1>Sunrise sunset</h1>\n<p> Copied from \n  <ul>\n    <li><a href=\"http://www.recursion.org/d3-for-mere-mortals/\"\n        >http://www.recursion.org/d3-for-mere-mortals/</a> </li>\n    <li><a href=\"http://www.srrb.noaa.gov/highlights/sunrise/azel.html\"\n        >http://www.srrb.noaa.gov/highlights/sunrise/azel.html</a> </li>\n  </ul>\n</p>\n<div id=\"vis\">\n<div id=\"day-length\">\n</div>\n</div>\n<div id=\"todo\">\n<pre>\n  * use NOAA's js calculator to plot sun position over time\n  * pan/zoom support\n</pre>\n</div>\n<script type=\"text/javascript\">\nvar dayLength = d3.select(\"#day-length\").\n  append(\"svg:svg\").\n  attr(\"width\", width + padding * 2).\n  attr(\"height\", height + padding * 2);\n\n// create a group to hold the axis-related elements\nvar axisGroup = dayLength.append(\"svg:g\").\n  attr(\"transform\", \"translate(\"+padding+\",\"+padding+\")\");\n\n// draw the x and y tick marks. Since they are behind the visualization, they\n// can be drawn all the way across it. Because the  has been\n// translated, they stick out the left side by going negative.\n\naxisGroup.selectAll(\".yTicks\").\n  data(d3.range(5, 22)).\n  enter().append(\"svg:line\").\n  attr(\"x1\", -5).\n  // Round and add 0.5 to fix anti-aliasing effects (see above)\n  attr(\"y1\", function(d) { return d3.round(y(new Date(2011, 0, 1, d))) + 0.5; }).\n  attr(\"x2\", width+5).\n  attr(\"y2\", function(d) { return d3.round(y(new Date(2011, 0, 1, d))) + 0.5; }).\n  attr(\"stroke\", \"lightgray\").\n  attr(\"class\", \"yTicks\");\n\naxisGroup.selectAll(\".xTicks\").\n  data(midMonthDates).\n  enter().append(\"svg:line\").\n  attr(\"x1\", x).\n  attr(\"y1\", -5).\n  attr(\"x2\", x).\n  attr(\"y2\", height+5).\n  attr(\"stroke\", \"lightgray\").\n  attr(\"class\", \"yTicks\");\n\n// draw the text for the labels. Since it is the same on top and\n// bottom, there is probably a cleaner way to do this by copying the\n// result and translating it to the opposite side\n\naxisGroup.selectAll(\"text.xAxisTop\").\n  data(midMonthDates).\n  enter().\n  append(\"svg:text\").\n  text(function(d, i) { return monthNames[i]; }).\n  attr(\"x\", x).\n  attr(\"y\", -8).\n  attr(\"text-anchor\", \"middle\").\n  attr(\"class\", \"axis xAxisTop\");\n\naxisGroup.selectAll(\"text.xAxisBottom\").\n  data(midMonthDates).\n  enter().\n  append(\"svg:text\").\n  text(function(d, i) { return monthNames[i]; }).\n  attr(\"x\", x).\n  attr(\"y\", height+15).\n  attr(\"text-anchor\", \"middle\").\n  attr(\"class\", \"xAxisBottom\");\n\naxisGroup.selectAll(\"text.yAxisLeft\").\n  data(d3.range(5, 22)).\n  enter().\n  append(\"svg:text\").\n  text(yAxisLabel).\n  attr(\"x\", -7).\n  attr(\"y\", function(d) { return y(new Date(2011, 0, 1, d)); }).\n  attr(\"dy\", \"3\").\n  attr(\"class\", \"yAxisLeft\").\n  attr(\"text-anchor\", \"end\");\n\naxisGroup.selectAll(\"text.yAxisRight\").\n  data(d3.range(5, 22)).\n  enter().\n  append(\"svg:text\").\n  text(yAxisLabel).\n  attr(\"x\", width+7).\n  attr(\"y\", function(d) { return y(new Date(2011, 0, 1, d)); }).\n  attr(\"dy\", \"3\").\n  attr(\"class\", \"yAxisRight\").\n  attr(\"text-anchor\", \"start\");\n\n// create a group for the sunrise and sunset paths\n\nvar lineGroup = dayLength.append(\"svg:g\").\n  attr(\"transform\", \"translate(\"+ padding + \", \" + padding + \")\");\n\n// draw the background. The part of this that remains uncovered will\n// represent the daylight hours.\n\nlineGroup.append(\"svg:rect\").\n  attr(\"x\", 0).\n  attr(\"y\", 0).\n  attr(\"height\", height).\n  attr(\"width\", width).\n  attr(\"fill\", \"lightyellow\");\n\n// The meat of the visualization is surprisingly simple. sunriseLine\n// and sunsetLine are areas (closed svg:path elements) that use the date\n// for the x coordinate and sunrise and sunset (respectively) for the y\n// coordinate. The sunrise shape is anchored at the top of the chart, and\n// sunset area is anchored at the bottom of the chart.\n\nvar sunriseLine = d3.svg.area().\n  x(function(d) { return x(d.date); }).\n  y1(function(d) { return y(new Date(2011, 0, 1, d.sunrise[0], d.sunrise[1])); }).\n  interpolate(\"linear\");\n\nlineGroup.\n  append(\"svg:path\").\n  attr(\"d\", sunriseLine(data)).\n  attr(\"fill\", \"steelblue\");\n\nvar sunsetLine = d3.svg.area().\n  x(function(d) { return x(d.date); }).\n  y0(height).\n  y1(function(d) { return y(new Date(2011, 0, 1, d.sunset[0], d.sunset[1])); }).\n  interpolate(\"linear\");\n\nlineGroup.append(\"svg:path\").\n  attr(\"d\", sunsetLine(data)).\n  attr(\"fill\", \"steelblue\");\n\n// finally, draw a line representing 12:00 across the entire\n// visualization\n\nlineGroup.append(\"svg:line\").\n  attr(\"x1\", 0).\n  attr(\"y1\", d3.round(y(new Date(2011, 0, 1, 12))) + 0.5).\n  attr(\"x2\", width).\n  attr(\"y2\", d3.round(y(new Date(2011, 0, 1, 12))) + 0.5).\n  attr(\"stroke\", \"lightgray\");\n\n\n</script>\n</body>\n</html>\n",
      "language": "HTML"
    }
  },
  "updated_at": "2011-09-17T18:49:59Z",
  "url": "https://api.github.com/gists/1224222",
  "id": "1224222"
}
