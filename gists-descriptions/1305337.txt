{
  "forks": [
    {
      "user": {
        "gravatar_id": "580e00312773d30472c21660f69eb0da",
        "login": "johan",
        "avatar_url": "https://secure.gravatar.com/avatar/580e00312773d30472c21660f69eb0da?d=https://a248.e.akamai.net/assets.github.com%2Fimages%2Fgravatars%2Fgravatar-user-420.png",
        "url": "https://api.github.com/users/johan",
        "id": 2459
      },
      "created_at": "2011-10-28T22:37:16Z",
      "updated_at": "2011-10-28T22:45:52Z",
      "url": "https://api.github.com/gists/1323758",
      "id": "1323758"
    }
  ],
  "user": {
    "gravatar_id": "005a27e09fe946ebef64bf4d134efc0a",
    "login": "mbostock",
    "avatar_url": "https://secure.gravatar.com/avatar/005a27e09fe946ebef64bf4d134efc0a?d=https://a248.e.akamai.net/assets.github.com%2Fimages%2Fgravatars%2Fgravatar-user-420.png",
    "url": "https://api.github.com/users/mbostock",
    "id": 230541
  },
  "git_pull_url": "git://gist.github.com/1305337.git",
  "history": [
    {
      "user": {
        "gravatar_id": "005a27e09fe946ebef64bf4d134efc0a",
        "login": "mbostock",
        "avatar_url": "https://secure.gravatar.com/avatar/005a27e09fe946ebef64bf4d134efc0a?d=https://a248.e.akamai.net/assets.github.com%2Fimages%2Fgravatars%2Fgravatar-user-420.png",
        "url": "https://api.github.com/users/mbostock",
        "id": 230541
      },
      "version": "115dc17efb81f17615efdeb7d6db2b8a905ad46a",
      "change_status": {
        "total": 8,
        "additions": 6,
        "deletions": 2
      },
      "url": "https://api.github.com/gists/1305337/115dc17efb81f17615efdeb7d6db2b8a905ad46a",
      "committed_at": "2011-10-28T15:42:26Z"
    },
    {
      "user": {
        "gravatar_id": "005a27e09fe946ebef64bf4d134efc0a",
        "login": "mbostock",
        "avatar_url": "https://secure.gravatar.com/avatar/005a27e09fe946ebef64bf4d134efc0a?d=https://a248.e.akamai.net/assets.github.com%2Fimages%2Fgravatars%2Fgravatar-user-420.png",
        "url": "https://api.github.com/users/mbostock",
        "id": 230541
      },
      "version": "76cf4013a6eed26fe7da49e524b34381074e2af8",
      "change_status": {
        "total": 3,
        "additions": 2,
        "deletions": 1
      },
      "url": "https://api.github.com/gists/1305337/76cf4013a6eed26fe7da49e524b34381074e2af8",
      "committed_at": "2011-10-22T01:57:25Z"
    },
    {
      "user": {
        "gravatar_id": "005a27e09fe946ebef64bf4d134efc0a",
        "login": "mbostock",
        "avatar_url": "https://secure.gravatar.com/avatar/005a27e09fe946ebef64bf4d134efc0a?d=https://a248.e.akamai.net/assets.github.com%2Fimages%2Fgravatars%2Fgravatar-user-420.png",
        "url": "https://api.github.com/users/mbostock",
        "id": 230541
      },
      "version": "7dcc4b0958033ad5bbdcb7a7d4e2004c545aa8ba",
      "change_status": {
        "total": 17,
        "additions": 9,
        "deletions": 8
      },
      "url": "https://api.github.com/gists/1305337/7dcc4b0958033ad5bbdcb7a7d4e2004c545aa8ba",
      "committed_at": "2011-10-22T01:41:32Z"
    },
    {
      "user": {
        "gravatar_id": "005a27e09fe946ebef64bf4d134efc0a",
        "login": "mbostock",
        "avatar_url": "https://secure.gravatar.com/avatar/005a27e09fe946ebef64bf4d134efc0a?d=https://a248.e.akamai.net/assets.github.com%2Fimages%2Fgravatars%2Fgravatar-user-420.png",
        "url": "https://api.github.com/users/mbostock",
        "id": 230541
      },
      "version": "5b94c0b4c7fab8ae59c6171a544500f0a3c39c76",
      "change_status": {
        "total": 6,
        "additions": 6,
        "deletions": 0
      },
      "url": "https://api.github.com/gists/1305337/5b94c0b4c7fab8ae59c6171a544500f0a3c39c76",
      "committed_at": "2011-10-22T01:25:47Z"
    },
    {
      "user": {
        "gravatar_id": "005a27e09fe946ebef64bf4d134efc0a",
        "login": "mbostock",
        "avatar_url": "https://secure.gravatar.com/avatar/005a27e09fe946ebef64bf4d134efc0a?d=https://a248.e.akamai.net/assets.github.com%2Fimages%2Fgravatars%2Fgravatar-user-420.png",
        "url": "https://api.github.com/users/mbostock",
        "id": 230541
      },
      "version": "e71e6d61caeb7d402c36010cf7631119f3bf35c0",
      "change_status": {
        "total": 2,
        "additions": 1,
        "deletions": 1
      },
      "url": "https://api.github.com/gists/1305337/e71e6d61caeb7d402c36010cf7631119f3bf35c0",
      "committed_at": "2011-10-22T01:24:25Z"
    },
    {
      "user": {
        "gravatar_id": "005a27e09fe946ebef64bf4d134efc0a",
        "login": "mbostock",
        "avatar_url": "https://secure.gravatar.com/avatar/005a27e09fe946ebef64bf4d134efc0a?d=https://a248.e.akamai.net/assets.github.com%2Fimages%2Fgravatars%2Fgravatar-user-420.png",
        "url": "https://api.github.com/users/mbostock",
        "id": 230541
      },
      "version": "0b2d6163992fad420346f73d64452f84c0c87e2f",
      "change_status": {
        "total": 5,
        "additions": 3,
        "deletions": 2
      },
      "url": "https://api.github.com/gists/1305337/0b2d6163992fad420346f73d64452f84c0c87e2f",
      "committed_at": "2011-10-22T01:23:49Z"
    },
    {
      "user": {
        "gravatar_id": "005a27e09fe946ebef64bf4d134efc0a",
        "login": "mbostock",
        "avatar_url": "https://secure.gravatar.com/avatar/005a27e09fe946ebef64bf4d134efc0a?d=https://a248.e.akamai.net/assets.github.com%2Fimages%2Fgravatars%2Fgravatar-user-420.png",
        "url": "https://api.github.com/users/mbostock",
        "id": 230541
      },
      "version": "ede6912494874800db623ad516467da5a29569ef",
      "change_status": {
        "total": 6,
        "additions": 4,
        "deletions": 2
      },
      "url": "https://api.github.com/gists/1305337/ede6912494874800db623ad516467da5a29569ef",
      "committed_at": "2011-10-22T01:22:26Z"
    },
    {
      "user": {
        "gravatar_id": "005a27e09fe946ebef64bf4d134efc0a",
        "login": "mbostock",
        "avatar_url": "https://secure.gravatar.com/avatar/005a27e09fe946ebef64bf4d134efc0a?d=https://a248.e.akamai.net/assets.github.com%2Fimages%2Fgravatars%2Fgravatar-user-420.png",
        "url": "https://api.github.com/users/mbostock",
        "id": 230541
      },
      "version": "ba91ab6408bc58087491be3b0266e61584d72580",
      "change_status": {
        "total": 14,
        "additions": 11,
        "deletions": 3
      },
      "url": "https://api.github.com/gists/1305337/ba91ab6408bc58087491be3b0266e61584d72580",
      "committed_at": "2011-10-22T01:20:40Z"
    },
    {
      "user": {
        "gravatar_id": "005a27e09fe946ebef64bf4d134efc0a",
        "login": "mbostock",
        "avatar_url": "https://secure.gravatar.com/avatar/005a27e09fe946ebef64bf4d134efc0a?d=https://a248.e.akamai.net/assets.github.com%2Fimages%2Fgravatars%2Fgravatar-user-420.png",
        "url": "https://api.github.com/users/mbostock",
        "id": 230541
      },
      "version": "ff1b92b1d0dffdc9f1c4693dc148786182c888d9",
      "change_status": {
        "total": 31,
        "additions": 22,
        "deletions": 9
      },
      "url": "https://api.github.com/gists/1305337/ff1b92b1d0dffdc9f1c4693dc148786182c888d9",
      "committed_at": "2011-10-22T01:14:09Z"
    },
    {
      "user": {
        "gravatar_id": "005a27e09fe946ebef64bf4d134efc0a",
        "login": "mbostock",
        "avatar_url": "https://secure.gravatar.com/avatar/005a27e09fe946ebef64bf4d134efc0a?d=https://a248.e.akamai.net/assets.github.com%2Fimages%2Fgravatars%2Fgravatar-user-420.png",
        "url": "https://api.github.com/users/mbostock",
        "id": 230541
      },
      "version": "30d68835235745bc9788b8de107885e7e44f5a99",
      "change_status": {
        "total": 2,
        "additions": 1,
        "deletions": 1
      },
      "url": "https://api.github.com/gists/1305337/30d68835235745bc9788b8de107885e7e44f5a99",
      "committed_at": "2011-10-22T01:06:58Z"
    }
  ],
  "description": "Pie Multiples with Nesting",
  "html_url": "https://gist.github.com/1305337",
  "git_push_url": "git@gist.github.com:1305337.git",
  "comments": 0,
  "created_at": "2011-10-22T00:28:17Z",
  "fork_of": {
    "user": {
      "gravatar_id": "005a27e09fe946ebef64bf4d134efc0a",
      "login": "mbostock",
      "avatar_url": "https://secure.gravatar.com/avatar/005a27e09fe946ebef64bf4d134efc0a?d=https://a248.e.akamai.net/assets.github.com%2Fimages%2Fgravatars%2Fgravatar-user-420.png",
      "url": "https://api.github.com/users/mbostock",
      "id": 230541
    },
    "git_pull_url": "git://gist.github.com/1305111.git",
    "description": "Pie Multiples",
    "html_url": "https://gist.github.com/1305111",
    "git_push_url": "git@gist.github.com:1305111.git",
    "comments": 0,
    "created_at": "2011-10-21T22:11:27Z",
    "public": true,
    "files": {
      "README.md": {
        "raw_url": "https://gist.github.com/raw/1305111/33c9515f96df952e9dff6031bb80c618cf51cca9/README.md",
        "type": "text/plain",
        "filename": "README.md",
        "size": 360,
        "language": "Markdown"
      },
      "index.html": {
        "raw_url": "https://gist.github.com/raw/1305111/311fc38351072886c48b1a2573eddf96159736f5/index.html",
        "type": "text/html",
        "filename": "index.html",
        "size": 2063,
        "language": "HTML"
      }
    },
    "updated_at": "2011-10-21T22:11:27Z",
    "url": "https://api.github.com/gists/1305111",
    "id": "1305111"
  },
  "public": true,
  "files": {
    "README.md": {
      "raw_url": "https://gist.github.com/raw/1305337/39f11464888437ea36ef0faec3a44268c5baea91/README.md",
      "type": "text/plain",
      "filename": "README.md",
      "size": 244,
      "content": "An example of multiple pie (donut) charts created with [D3](http://mbostock.github.com/d3/). The data is represented as a tabular array of objects; each row in the table is mapped to an arc, and rows are grouped into pie charts using `d3.nest`.",
      "language": "Markdown"
    },
    "flights.csv": {
      "raw_url": "https://gist.github.com/raw/1305337/aca00d8a2eb119093fbfb7b2671239399b3630a7/flights.csv",
      "type": "text/csv",
      "filename": "flights.csv",
      "size": 577,
      "content": "origin,carrier,count\nATL,9E,5\nATL,AA,22\nATL,CO,11\nATL,DL,360\nATL,EV,245\nATL,F9,3\nATL,FL,241\nATL,MQ,2\nATL,NW,14\nATL,OH,12\nATL,OO,11\nATL,UA,8\nATL,US,9\nATL,XE,3\nATL,YV,7\nDFW,9E,2\nDFW,AA,448\nDFW,AS,3\nDFW,CO,10\nDFW,DL,10\nDFW,F9,4\nDFW,FL,7\nDFW,MQ,254\nDFW,NW,5\nDFW,OH,3\nDFW,OO,5\nDFW,UA,13\nDFW,US,18\nDFW,XE,4\nORD,AA,203\nORD,AS,4\nORD,B6,7\nORD,CO,14\nORD,DL,10\nORD,MQ,253\nORD,NW,17\nORD,OH,9\nORD,OO,125\nORD,UA,228\nORD,US,19\nORD,XE,3\nORD,YV,60\nSFO,AA,34\nSFO,AS,14\nSFO,B6,5\nSFO,CO,14\nSFO,DL,12\nSFO,F9,4\nSFO,FL,2\nSFO,HA,1\nSFO,MQ,5\nSFO,NW,10\nSFO,OO,110\nSFO,UA,125\nSFO,US,20\nSFO,WN,24\nSFO,XE,5\n",
      "language": null
    },
    "index.html": {
      "raw_url": "https://gist.github.com/raw/1305337/f48af6f953248fa40d2133d499d73bc34f1e62bf/index.html",
      "type": "text/html",
      "filename": "index.html",
      "size": 3595,
      "content": "<!DOCTYPE html>\n<html>\n  <head>\n    <meta http-equiv=\"Content-Type\" content=\"text/html;charset=utf-8\"/>\n    <title>Pie Multiples with Nesting</title>\n    <script type=\"text/javascript\" src=\"http://mbostock.github.com/d3/d3.js?2.4.5\"></script>\n    <script type=\"text/javascript\" src=\"http://mbostock.github.com/d3/d3.csv.js?2.4.5\"></script>\n    <script type=\"text/javascript\" src=\"http://mbostock.github.com/d3/d3.layout.js?2.4.5\"></script>\n    <style type=\"text/css\">\n\nbody {\n  text-align: center;\n}\n\nsvg {\n  font: 10px sans-serif;\n}\n\n    </style>\n  </head>\n  <body>\n    <script type=\"text/javascript\">\n\n// Load the flight data asynchronously.\nd3.csv(\"flights.csv\", function(flights) {\n\n  // Define the margin, radius, and color scale. Colors are assigned lazily, so\n  // if you want deterministic behavior, define a domain for the color scale.\n  var m = 10,\n      r = 100,\n      z = d3.scale.category20c();\n\n  // Define a pie layout: the pie angle encodes the count of flights. Since our\n  // data is stored in CSV, the counts are strings which we coerce to numbers.\n  var pie = d3.layout.pie()\n      .value(function(d) { return +d.count; })\n      .sort(function(a, b) { return b.count - a.count; });\n\n  // Define an arc generator. Note the radius is specified here, not the layout.\n  var arc = d3.svg.arc()\n      .innerRadius(r / 2)\n      .outerRadius(r);\n\n  // Nest the flight data by originating airport. Our data has the counts per\n  // airport and carrier, but we want to group counts by aiport.\n  var airports = d3.nest()\n      .key(function(d) { return d.origin; })\n      .entries(flights);\n\n  // Insert an svg element (with margin) for each airport in our dataset. A\n  // child g element translates the origin to the pie center.\n  var svg = d3.select(\"body\").selectAll(\"div\")\n      .data(airports)\n    .enter().append(\"div\") // http://code.google.com/p/chromium/issues/detail?id=98951\n      .style(\"display\", \"inline-block\")\n      .style(\"width\", (r + m) * 2 + \"px\")\n      .style(\"height\", (r + m) * 2 + \"px\")\n    .append(\"svg:svg\")\n      .attr(\"width\", (r + m) * 2)\n      .attr(\"height\", (r + m) * 2)\n    .append(\"svg:g\")\n      .attr(\"transform\", \"translate(\" + (r + m) + \",\" + (r + m) + \")\");\n\n  // Add a label for the airport. The `key` comes from the nest operator.\n  svg.append(\"svg:text\")\n      .attr(\"dy\", \".35em\")\n      .attr(\"text-anchor\", \"middle\")\n      .text(function(d) { return d.key; });\n\n  // Pass the nested per-airport values to the pie layout. The layout computes\n  // the angles for each arc. Another g element will hold the arc and its label.\n  var g = svg.selectAll(\"g\")\n      .data(function(d) { return pie(d.values); })\n    .enter().append(\"svg:g\");\n\n  // Add a colored arc path, with a mouseover title showing the count.\n  g.append(\"svg:path\")\n      .attr(\"d\", arc)\n      .style(\"fill\", function(d) { return z(d.data.carrier); })\n    .append(\"svg:title\")\n      .text(function(d) { return d.data.carrier + \": \" + d.data.count; });\n\n  // Add a label to the larger arcs, translated to the arc centroid and rotated.\n  g.filter(function(d) { return d.endAngle - d.startAngle > .2; }).append(\"svg:text\")\n      .attr(\"dy\", \".35em\")\n      .attr(\"text-anchor\", \"middle\")\n      .attr(\"transform\", function(d) { return \"translate(\" + arc.centroid(d) + \")rotate(\" + angle(d) + \")\"; })\n      .text(function(d) { return d.data.carrier; });\n\n  // Computes the label angle of an arc, converting from radians to degrees.\n  function angle(d) {\n    var a = (d.startAngle + d.endAngle) * 90 / Math.PI - 90;\n    return a > 90 ? a - 180 : a;\n  }\n});\n\n    </script>\n  </body>\n</html>\n",
      "language": "HTML"
    }
  },
  "updated_at": "2011-10-22T00:41:31Z",
  "url": "https://api.github.com/gists/1305337",
  "id": "1305337"
}
